[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Formation aux bonnes pratiques `Git` et `R`",
    "section": "",
    "text": "Un parcours de formation construit par l‚ÄôInsee.\nTous les supports sont sur le Github InseeFrLab   \n\n\n\n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nVersion all√©g√©e de la formation aux bonnes pratiques en\nR et en Git, ax√©e autour de\nl'apprentissage de Git, de la structure des projets R et\nde la qualit√© du code R\n\n\nVersion en une journ√©e\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nVersion compl√®te de la formation aux bonnes pratiques en\nR et en Git, ax√©e autour de la notion de\nreproductibilit√© et de la collaboration.\n\n\nVersion en deux jours\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nVersion plus succincte pour sensibiliser les\nresponsables hi√©rarchiques au sujet\ndes bonnes pratiques de code\nR et en Git.\n\n\nVersion 1/2 journ√©e\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nPr√©sentation rapide sous forme de teasing\nde la formation aux bonnes pratiques en\nR et en Git.\n\n\nVersion en 1h\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#formation-aux-bonnes-pratiques-avec-git-et",
    "href": "index.html#formation-aux-bonnes-pratiques-avec-git-et",
    "title": "Formation aux bonnes pratiques `Git` et `R`",
    "section": "",
    "text": "Un parcours de formation construit par l‚ÄôInsee.\nTous les supports sont sur le Github InseeFrLab   \n\n\n\n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nVersion all√©g√©e de la formation aux bonnes pratiques en\nR et en Git, ax√©e autour de\nl'apprentissage de Git, de la structure des projets R et\nde la qualit√© du code R\n\n\nVersion en une journ√©e\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nVersion compl√®te de la formation aux bonnes pratiques en\nR et en Git, ax√©e autour de la notion de\nreproductibilit√© et de la collaboration.\n\n\nVersion en deux jours\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nVersion plus succincte pour sensibiliser les\nresponsables hi√©rarchiques au sujet\ndes bonnes pratiques de code\nR et en Git.\n\n\nVersion 1/2 journ√©e\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n  \n     \n      \n        \n          \n            \n          \n         \n        \n          \n            \n            \n\n            \n              \nPr√©sentation rapide sous forme de teasing\nde la formation aux bonnes pratiques en\nR et en Git.\n\n\nVersion en 1h\n\n            \n\n            \n            \n              \n                \n              \n            \n            \n            \n              \n                \n                  \n                    \n                      \n                        Slides\n                      \n                    \n                  \n                \n              \n            \n          \n        \n\n        \n\n      \n     \n  \n\n\n\n\nNo matching items"
  },
  {
    "objectID": "index.html#cr√©dits",
    "href": "index.html#cr√©dits",
    "title": "Formation aux bonnes pratiques `Git` et `R`",
    "section": "Cr√©dits",
    "text": "Cr√©dits\nCette formation a √©t√© con√ßue de mani√®re collaborative par des √©quipes de l‚ÄôInsee et coordonn√©e par Romain Avouac et Lino Galiana.\nElle a b√©n√©fici√© des contributions de : Romain Avouac, Julien Blasco, Thomas Faria, Lino Galiana, Pierre Lamarche, Romain Lesur Olivier Meslin, Julien Pramil, Olivier Pucher, Cl√©ment Rousset, Mohamed Seikouri et Tom Seimandi.\nLes supports et le code source (Github InseeFrLab ) sont librement r√©utilisables et disponibles sous licence MIT."
  },
  {
    "objectID": "slides/complete.html#introduction",
    "href": "slides/complete.html#introduction",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Introduction",
    "text": "Introduction\n\n\nVersion longue de la formation aux bonnes pratiques avec R et Git (page d‚Äôaccueil)"
  },
  {
    "objectID": "slides/complete.html#la-notion-de-bonnes-pratiques",
    "href": "slides/complete.html#la-notion-de-bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "La notion de bonnes pratiques",
    "text": "La notion de bonnes pratiques\n\nOrigine : communaut√© des d√©veloppeurs logiciels\nConstats :\n\nle ‚Äúcode est plus souvent lu qu‚Äô√©crit‚Äù (Guido Van Rossum)\nla maintenance d‚Äôun code est tr√®s co√ªteuse\n\nCons√©quence : un ensemble de r√®gles informelles, conventionnellement accept√©es comme produisant des logiciels fiables, √©volutifs et maintenables"
  },
  {
    "objectID": "slides/complete.html#pourquoi-sint√©resser-aux-bonnes-pratiques",
    "href": "slides/complete.html#pourquoi-sint√©resser-aux-bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Pourquoi s‚Äôint√©resser aux bonnes pratiques ?",
    "text": "Pourquoi s‚Äôint√©resser aux bonnes pratiques ?\n\nL‚Äôactivit√© du statisticien / datascientist tend √† se rapprocher de celle du d√©veloppeur :\n\nprojets intenses en code\nprojets collaboratifs et de grande envergure\ncomplexification des donn√©es et donc des infrastructures\nd√©ploiement d‚Äôapplications pour valoriser les analyses"
  },
  {
    "objectID": "slides/complete.html#bonnes-pratiques-et-reproductibilit√©",
    "href": "slides/complete.html#bonnes-pratiques-et-reproductibilit√©",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques et reproductibilit√©",
    "text": "Bonnes pratiques et reproductibilit√©\n\n\n\n\n\nSource : Peng R., Reproducible Research in Computational Science, Science (2011)\n\nUne reproductibilit√© parfaite est co√ªteuse\nGit est un standard atteignable et efficient\n\n\n\n\n\n\n\n\nNote\n\n\nQuel socle de bonnes pratiques pour les projets statistiques en  ?"
  },
  {
    "objectID": "slides/complete.html#horizon-de-cette-formation",
    "href": "slides/complete.html#horizon-de-cette-formation",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Horizon de cette formation",
    "text": "Horizon de cette formation\nUn point de d√©part commun"
  },
  {
    "objectID": "slides/complete.html#horizon-de-cette-formation-1",
    "href": "slides/complete.html#horizon-de-cette-formation-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Horizon de cette formation",
    "text": "Horizon de cette formation\nUn point de d√©part commun \nUne structuration de projet plus viable"
  },
  {
    "objectID": "slides/complete.html#plan-de-la-partie",
    "href": "slides/complete.html#plan-de-la-partie",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Plan de la partie",
    "text": "Plan de la partie\n1Ô∏è‚É£ Le contr√¥le de version : pourquoi faire ?\n2Ô∏è‚É£ Le contr√¥le de version avec Git\n3Ô∏è‚É£ Le travail collaboratif avec Git"
  },
  {
    "objectID": "slides/complete.html#archiver-son-code-proprement",
    "href": "slides/complete.html#archiver-son-code-proprement",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\npour en finir avec √ßa :"
  },
  {
    "objectID": "slides/complete.html#archiver-son-code-proprement-1",
    "href": "slides/complete.html#archiver-son-code-proprement-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nou √ßa :"
  },
  {
    "objectID": "slides/complete.html#archiver-son-code-proprement-2",
    "href": "slides/complete.html#archiver-son-code-proprement-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nou encore √ßa :\nprior &lt;- read_csv(prior_path)\nprior &lt;- prior %&gt;%\n    select(id, proba_inter, proba_build, proba_rfl) %&gt;%\n    separate(id, into = c('nidt', 'grid_id'), sep = \":\") %&gt;%\n    group_by(nidt) %&gt;%\n    mutate(\n        proba_build = proba_build/sum(proba_build),\n        proba_rfl = proba_rfl/sum(proba_rfl),\n        ) %&gt;%\n    unite(col = \"id\", nidt, grid_id, sep = \":\")\n\n# Test\n# prior_test &lt;- prior %&gt;%\n#    mutate(\n#        proba_inter = round(proba_inter, 4)\n#        proba_build = round(proba_build, 4)\n#        proba_rfl = round(proba_rfl, 4)\n#    )\n\nwrite_csv(prior_round, \"~/prior.csv\")"
  },
  {
    "objectID": "slides/complete.html#archiver-son-code-proprement-3",
    "href": "slides/complete.html#archiver-son-code-proprement-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nPour arriver √† √ßa :\n\n\n\n\n\nSource : ThinkR"
  },
  {
    "objectID": "slides/complete.html#voyager-dans-le-temps-de-votre-projet",
    "href": "slides/complete.html#voyager-dans-le-temps-de-votre-projet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Voyager dans le temps (de votre projet)",
    "text": "2Ô∏è‚É£ Voyager dans le temps (de votre projet)"
  },
  {
    "objectID": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace",
    "href": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nUn mod√®le distribu√©\n\n\n\n\n\nSource : specbee.com"
  },
  {
    "objectID": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace-1",
    "href": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nQui permet l‚Äôexp√©rimentation en toute s√©curit√©\n\nSource : lutece.paris.fr"
  },
  {
    "objectID": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace-2",
    "href": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nQuel que soit l‚Äôenvironnement de travail"
  },
  {
    "objectID": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace-3",
    "href": "slides/complete.html#une-collaboration-simplifi√©e-et-efficace-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nAvec des outils pour faciliter la collaboration"
  },
  {
    "objectID": "slides/complete.html#partager-son-code-√†-un-public-large",
    "href": "slides/complete.html#partager-son-code-√†-un-public-large",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Partager son code √† un public large",
    "text": "4Ô∏è‚É£ Partager son code √† un public large\nUne vitrine pour les projets et l‚Äôorganisation"
  },
  {
    "objectID": "slides/complete.html#en-r√©sum√©",
    "href": "slides/complete.html#en-r√©sum√©",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "En r√©sum√©",
    "text": "En r√©sum√©\n\nConstruire et naviguer √† travers l‚Äôhistorique de son projet\nLa collaboration rendue simple et efficace\nAm√©liorer la reproductibilit√© de ses projets\nAm√©liorer la visibilit√© de ses projets"
  },
  {
    "objectID": "slides/complete.html#git-est-complexe",
    "href": "slides/complete.html#git-est-complexe",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ö†Ô∏è Git est complexe",
    "text": "‚ö†Ô∏è Git est complexe\nL‚Äôutilisation de Git n√©cessite certaines notions pr√©alables:\n\nFonctionnement d‚Äôun filesystem\nConnaissance basique du terminal Linux\nPotentiellement, un grand nombre de commandes\n\n\n\n\n\nSource : iulianacosmina.com"
  },
  {
    "objectID": "slides/complete.html#git-est-complexe-1",
    "href": "slides/complete.html#git-est-complexe-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ö†Ô∏è Git est complexe",
    "text": "‚ö†Ô∏è Git est complexe\nMais\n\nL‚Äôusage quotidien n‚Äôimplique que quelques commandes\nLes messages de Git sont tr√®s informatifs\nEnorm√©ment de ressources disponibles sur internet\nDes interfaces visuelles (ex: RStudio, Sublime Merge, VS Code) qui facilitent l‚Äôapprentissage\nUn petit investissement individuel pour de gros gains collectifs"
  },
  {
    "objectID": "slides/complete.html#concepts",
    "href": "slides/complete.html#concepts",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nGit, GitHub, GitLab‚Ä¶ quelles diff√©rences ?\n\nGit est un logiciel ;\nUtilisation en ligne de commandes\nDiff√©rentes interfaces graphiques (RStudio, VS Code‚Ä¶)"
  },
  {
    "objectID": "slides/complete.html#concepts-1",
    "href": "slides/complete.html#concepts-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nGit, GitHub, GitLab‚Ä¶ quelles diff√©rences ?\n\nGitHub et GitLab sont des forges logicielles\nForge: espace d‚Äôarchivage de code\nDes fonctionalit√©s suppl√©mentaires : r√©seau social du code\n\n\n\n\n\n\n\nAstuce\n\n\n\nGitHub : utilisation pour les projets open-source\nGitLab : utilisation pour les projets internes"
  },
  {
    "objectID": "slides/complete.html#concepts-2",
    "href": "slides/complete.html#concepts-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nD√©p√¥t local / d√©p√¥t distant (remote)\n\n\n\n\n\n\nPar d√©faut, le d√©p√¥t distant porte l‚Äôalias origin"
  },
  {
    "objectID": "slides/complete.html#concepts-3",
    "href": "slides/complete.html#concepts-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nWorkflow local\n\n\n\n\n\nSource : Git Documentation"
  },
  {
    "objectID": "slides/complete.html#concepts-4",
    "href": "slides/complete.html#concepts-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nWorkflow complet\n\n\n\nSource : itnext.io"
  },
  {
    "objectID": "slides/complete.html#commandes-essentielles",
    "href": "slides/complete.html#commandes-essentielles",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Commandes essentielles",
    "text": "Commandes essentielles\n\n\n\n\nAction\nCommande\n\n\n\n\nCloner un projet\ngit clone [url-to-git-repo]\n\n\nAfficher les changements\ngit status\n\n\nRetrouver l‚ÄôURL du d√©p√¥t distant\ngit remote -v"
  },
  {
    "objectID": "slides/complete.html#commandes-essentielles-1",
    "href": "slides/complete.html#commandes-essentielles-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Commandes essentielles",
    "text": "Commandes essentielles\n\n\n\n\n\n\n\n\nAction\nCommande\n\n\n\n\nAjouter des changements √† l‚Äôindex de Git (stage fixes)\nUn seul fichier : git add &lt;file-name&gt;  Tous les fichiers d√©j√† index√©s : git add -u  Tous les fichiers ‚ö†Ô∏è : git add -A\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\nLa m√©thode git add -A peut amener √† suivre les modifications de fichiers qui ne devraient pas l‚Äô√™tre (par exemple, des donn√©es).\nIl est recommand√© de bien r√©fl√©chir avant de l‚Äôutiliser (ou d‚Äôavoir un bon .gitignore)"
  },
  {
    "objectID": "slides/complete.html#commandes-essentielles-2",
    "href": "slides/complete.html#commandes-essentielles-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Commandes essentielles",
    "text": "Commandes essentielles\n\n\n\n\n\n\n\n\nAction\nCommande\n\n\n\n\nFaire un commit\ngit commit -m \"message\"\n\n\nPousser les changements locaux vers le d√©p√¥t distant (branche master)\ngit push origin master\n\n\nR√©cup√©rer les changements sur le d√©p√¥t distant (branche master)\ngit pull origin master"
  },
  {
    "objectID": "slides/complete.html#modes-dauthentification",
    "href": "slides/complete.html#modes-dauthentification",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Modes d‚Äôauthentification",
    "text": "Modes d‚Äôauthentification\n\n\n insee\n\n\n\n\nhttps\n\ngit clone https://github.com/username/projet.git\nsimple √† utiliser\nauthentification username + password (ou token) √† chaque push\n\nssh\n\ngit clone git@github.com:username/projet.git\n(plus) complexe √† initialiser\nauthentification automatique\n\n\n\n\n\n\n\nhttps\n\ngit clone https://gitlab.insee.fr/username_or_groupname/projet.git\nsimple √† utiliser\nauthentification username + password (ou token) √† chaque push\n\nssh\n\ngit clone git@gitlab.insee.fr:username_or_groupname/projet.git\n(plus) complexe √† initialiser\nauthentification automatique"
  },
  {
    "objectID": "slides/complete.html#application-0",
    "href": "slides/complete.html#application-0",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 0",
    "text": "Application 0\n\n insee\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCr√©er un compte GitHub\nCr√©er un nouveau d√©p√¥t priv√© sur GitHub en incluant un fichier README\nCr√©er un compte sur le SSP Cloud\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants GitHub √† une valeur suffisamment √©lev√©e\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio du Datalab):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nG√©n√©rer un token (jeton d‚Äôauthentification) sur GitHub\nStocker le token sur le SSP Cloud (ou un gestionnaire de mot de passe) :\n\nMon Compte -&gt; Git -&gt; Token d'acc√®s personnel pour Forge Git\n\nTerminer la proc√©dure de clonage en fournissant le nom d‚Äôutilisateur GitHub et le token\n\n\n\n\n\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCompte d√©j√† cr√©√© sur le gitlab interne\nCr√©er un nouveau d√©p√¥t priv√© sur gitlab.insee.fr\nCr√©er un compte sur LS3 via AUS.\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants Gitlab √† une valeur suffisamment √©lev√©e\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio de la plateforme LS3):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nG√©n√©rer un token (jeton d‚Äôauthentification) sur gitlab.insee.fr\nStocker le token sur LS3 (ou un gestionnaire de mot de passe) :\n\nMon Compte -&gt; Git -&gt; Token d'acc√®s personnel pour Forge Git\n\nTerminer la proc√©dure de clonage en fournissant le nom d‚Äôutilisateur (IDEP) et le token\n\n\n\n\n\n\n\n\n‚ùì Question : qu‚Äôest ce qui diff√©rencie le projet clon√© d‚Äôun projet quelconque ?"
  },
  {
    "objectID": "slides/complete.html#application-1",
    "href": "slides/complete.html#application-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPremiers commits\n\n\n\n\nCr√©er un dossier üìÅ scripts\nY cr√©er les fichiers script1.R et script2.R, chacun contenant quelques commandes R de votre choix\nAjouter ces fichiers √† la zone de staging de Git en les cochant dans l‚Äôinterface RStudio\nEffectuer un commit, auquel on donnera un message descriptif pertinent\nSupprimer le fichier script1.R et modifier le contenu du fichier script2.R\nAnalyser ce qui se passe lorsque l‚Äôon coche ces fichiers dans l‚Äôinterface RStudio\nEffectuer un nouveau commit pour ajouter ces modifications √† l‚Äôhistorique\nVisualiser l‚Äôhistorique du projet √† partir de l‚Äôinterface graphique de RStudio\n\n\n\n\n\n‚ùì Question : √† ce stade, le d√©p√¥t du projet sur GitHub / Gitlab (remote) a-t-il √©t√© modifi√© ?"
  },
  {
    "objectID": "slides/complete.html#application-2",
    "href": "slides/complete.html#application-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 2",
    "text": "Application 2\n\n\n\nInteractions avec le d√©p√¥t distant\n\n\n\n\nEffectuer un push pour int√©grer les changements locaux au projet distant\nParcourir l‚Äôhistorique du projet sur GitHub / Gitlab\n\nFaire appara√Ætre les diff√©rences entre deux versions cons√©cutives du projet\nAfficher une version pass√©e du projet"
  },
  {
    "objectID": "slides/complete.html#bonnes-pratiques",
    "href": "slides/complete.html#bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nQue versionne-t-on ?\n\nEssentiellement du code source\nPas d‚Äôoutputs (fichiers .html, .pdf, mod√®les‚Ä¶)\nPas de donn√©es, d‚Äôinformations locales ou sensibles\n\n\n\n\n\n\n\n\nNote\n\n\nPour d√©finir des r√®gles qui √©vitent de committer tel ou tel fichier, on utilise un fichier nomm√© .gitignore.\nSi on m√©lange du code et des √©l√©ments annexes (output, donn√©es‚Ä¶) dans un m√™me dossier, il faut consacrer du temps √† ce fichier.\nDes mod√®les de .gitignore existent sur internet, par exemple celui-ci pour les projets .\nN‚Äôh√©sitez pas √† y ajouter des r√®gles conservatrices (par exemple *.csv), comme cela est expliqu√© dans la documentation utilitR."
  },
  {
    "objectID": "slides/complete.html#bonnes-pratiques-1",
    "href": "slides/complete.html#bonnes-pratiques-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nFormat des commits\n\n\n\n\n\n\n\nFr√©quence\n\nAussi souvent que possible\nLe lot de modifications doit ‚Äúavoir du sens‚Äù\n\nMessages\n\nCourts et informatifs (comme un titre de mail)\nD√©crire le pourquoi plut√¥t que le comment dans le texte"
  },
  {
    "objectID": "slides/complete.html#application-3",
    "href": "slides/complete.html#application-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\nLe fichier .gitignore\n\n\n\nL‚Äôobjectif de cette application est de cr√©er le fichier .gitignore, qui permet de sp√©cifier l‚Äôensemble des fichiers et/ou dossiers que l‚Äôon souhaite exclure de l‚Äôindexation faite par Git. Il doit se situer √† la racine du projet.\n\nCr√©er un fichier texte nomm√© .gitignore √† la racine du projet (attention √† ne pas ajouter d‚Äôextension au fichier, type .txt)\nCr√©er un dossier data √† la racine du projet et cr√©er √† l‚Äôint√©rieur de celui-ci un fichier data/raw.csv avec une ligne de donn√©es quelconque\nAjouter une premi√®re r√®gle au fichier .gitignore qui exclue le dossier data/, et v√©rifier que la r√®gle fonctionne\nAjouter une seconde r√®gle excluant tous les fichiers de type *.pdf et *.html, et v√©rifier que la r√®gle fonctionne\n\n\n\n\n\n‚ùì Question : que se passe-t-il lorsque l‚Äôon ajoute au .gitignore des fichiers qui ont d√©j√† √©t√© commit sur le projet Git ?\n\n\n\n\nDes fichiers .gitignore standards\n\n\nDans cette application, nous avons g√©n√©r√© le fichier .gitignore manuellement. En pratique, il existe des .gitignore standards adapt√©s pour chaque langage de programmation, qui impl√©mentent d√©j√† de nombreuses r√®gles pertinentes. Le mieux est donc de partir du .gitignore R pour tout nouveau projet R, et de rajouter les r√®gles sp√©cifiques que l‚Äôon souhaite appliquer au projet."
  },
  {
    "objectID": "slides/complete.html#outils-pour-le-travail-collaboratif",
    "href": "slides/complete.html#outils-pour-le-travail-collaboratif",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Outils pour le travail collaboratif",
    "text": "Outils pour le travail collaboratif\n\nL‚Äô√©co-syst√®me Git facilite le travail collaboratif\n\nGit  : mod√®le des branches\nGitHub  / GitLab  : Issues, Pull Requests, Forks\n\nCes outils ne remplacent pas une bonne d√©finition de l‚Äôorganisation du travail en √©quipe\n\nChoix d‚Äôun workflow\nDroits d‚Äôacc√®s\nR√®gles de contribution"
  },
  {
    "objectID": "slides/complete.html#application-4",
    "href": "slides/complete.html#application-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 4",
    "text": "Application 4\n\n\n\nSynchronisation des d√©p√¥ts\n\n\n\n\nSe mettre par groupes de 3/4 personnes:\n\nUne personne aura la responsabilit√© d‚Äô√™tre mainteneur\nDeux √† trois personnes seront d√©veloppeurs\n\nLe mainteneur cr√©e un d√©p√¥t sur Github / Gitlab. Il/Elle donne des droits au(x) d√©veloppeur(s) du projet\nCr√©er une copie locale (clone) du projet sur son service RStudio\nCr√©er un fichier &lt;votre_nom&gt;-&lt;votre_prenom&gt;.md. √âcrire dedans trois phrases de son choix sans ponctuation ni majuscules, puis commit et push les modifications\n√Ä ce stade, une seule personne (la plus rapide) devrait ne pas avoir rencontr√© de rejet du push. C‚Äôest normal ! Le premier ayant fait un push a modifi√© le d√©p√¥t commun ; les autres doivent int√©grer ces modifications dans leur version locale (pull) avant d‚Äôavoir le droit de proposer un changement.\nN√©anmoins, le pull renvoie √©galement une erreur : Git ne parvient pas √† r√©soudre la divergence d‚Äôhistorique. Essayons de comprendre le probl√®me et les solutions possibles."
  },
  {
    "objectID": "slides/complete.html#divergence-dhistoriques-cas-simple",
    "href": "slides/complete.html#divergence-dhistoriques-cas-simple",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Divergence d‚Äôhistoriques : cas simple",
    "text": "Divergence d‚Äôhistoriques : cas simple\n\n\nGit r√©sout le probl√®me via un fast-forward merge\n\nLe commit distant est rajout√© √† l‚Äôhistorique local\nLes d√©p√¥ts sont synchronis√©s"
  },
  {
    "objectID": "slides/complete.html#divergence-dhistoriques-cas-compliqu√©",
    "href": "slides/complete.html#divergence-dhistoriques-cas-compliqu√©",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Divergence d‚Äôhistoriques : cas compliqu√©",
    "text": "Divergence d‚Äôhistoriques : cas compliqu√©\n\n\nGit ne peut pas r√©soudre de lui m√™me la divergence\nDeux strat√©gies possibles\n\nLe merge\nLe rebase"
  },
  {
    "objectID": "slides/complete.html#√®re-possibilit√©-le-merge",
    "href": "slides/complete.html#√®re-possibilit√©-le-merge",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1√®re possibilit√© : le merge",
    "text": "1√®re possibilit√© : le merge\n\n\nGit cr√©e un commit de merge\n\nComportement par d√©faut (jusqu‚Äô√† r√©cemment)\n\nInconv√©nient : rend l‚Äôhistorique non-lin√©aire (plus d‚Äôexplications)"
  },
  {
    "objectID": "slides/complete.html#√®me-possibilit√©-le-rebase-12",
    "href": "slides/complete.html#√®me-possibilit√©-le-rebase-12",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2√®me possibilit√© : le rebase (1/2)",
    "text": "2√®me possibilit√© : le rebase (1/2)\n\n\nGit effectue 3 √©tapes\n\nSupprime temporairement le commit local\nR√©alise un fast-forward merge\nRajoute le commit local au bout de l‚Äôhistorique"
  },
  {
    "objectID": "slides/complete.html#√®me-possibilit√©-le-rebase-22",
    "href": "slides/complete.html#√®me-possibilit√©-le-rebase-22",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2√®me possibilit√© : le rebase (2/2)",
    "text": "2√®me possibilit√© : le rebase (2/2)\n\n\nAvantage : l‚Äôhistorique reste lin√©aire\nAttention : ne jamais rebase des commits d√©j√† pouss√©s sur un d√©p√¥t public (plus d‚Äôexplications)"
  },
  {
    "objectID": "slides/complete.html#application-4-1",
    "href": "slides/complete.html#application-4-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 4",
    "text": "Application 4\n\n\n\nSynchronisation des d√©p√¥ts\n\n\n\n\nDans notre cas, on va conserver le pr√©c√©dent d√©faut (le commit de merge). Comme l‚Äôinterface RStudio ne permet pas (encore) de s√©lectionner la strat√©gie de pull, on va pr√©ciser la configuration voulue via une commande pass√©e dans le terminal\n\ngit config pull.rebase false\n\nPour ceux dont le push a √©t√© refus√©, effectuer un pull des modifications distantes via l‚Äôinterface RStudio\nEffectuer √† nouveau un push de vos modifications locales\nLes derniers membres du groupe devront refaire les √©tapes pr√©c√©dentes, potentiellement plusieurs fois, pour pouvoir push leurs modifications locales\n\n\n\n\n\n‚ùì Question : que se serait-il pass√© si les diff√©rents membres du groupe avaient effectu√© leurs modifications sur un seul et m√™me fichier ?"
  },
  {
    "objectID": "slides/complete.html#application-5",
    "href": "slides/complete.html#application-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 5",
    "text": "Application 5\n\n\n\nR√©soudre les conflits\n\n\n\n\nOn se place dans la m√™me configuration que dans l‚Äôapplication pr√©c√©dente : un mainteneur et deux/trois d√©veloppeurs\nLe mainteneur modifie le contenu de son fichier, puis commit et push les modifications\nSans faire de pull pr√©alable, les d√©veloppeurs modifient √©galement le contenu du fichier du mainteneur, puis commit et push les modifications\nLe push est rejet√© pour la m√™me raison que dans l‚Äôapplication pr√©c√©dente : les d√©p√¥ts ne sont plus synchronis√©s, il faut pull les changements distants au pr√©alable. Mais cette fois, le pull est √©galement rejet√© : il y a un conflit entre l‚Äôhistorique du projet distant et celui du projet local. Git nous indique qu‚Äôil faut r√©soudre le conflit avant de pouvoir modifier l‚Äôhistorique du projet.\nUtiliser l‚Äôinterface de RStudio pour r√©soudre le conflit, en choisissant la version du fichier que vous souhaitez conserver, puis commit/push les modifications\nComme dans l‚Äôapplication pr√©c√©dente, seul le d√©veloppeur le plus rapide parvient √† push. Les autres doivent r√©p√©ter l‚Äôop√©ration.\n\n\n\n\n\n‚ùì Question : comment limiter au maximum la survenue des conflits d‚Äôhistorique ?"
  },
  {
    "objectID": "slides/complete.html#le-mod√®le-des-branches",
    "href": "slides/complete.html#le-mod√®le-des-branches",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le mod√®le des branches",
    "text": "Le mod√®le des branches"
  },
  {
    "objectID": "slides/complete.html#le-mod√®le-des-branches-1",
    "href": "slides/complete.html#le-mod√®le-des-branches-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le mod√®le des branches",
    "text": "Le mod√®le des branches"
  },
  {
    "objectID": "slides/complete.html#exemple-dorganisation-le-github-flow",
    "href": "slides/complete.html#exemple-dorganisation-le-github-flow",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Exemple d‚Äôorganisation : le GitHub flow",
    "text": "Exemple d‚Äôorganisation : le GitHub flow\n\nDescription plus d√©taill√©e : ici"
  },
  {
    "objectID": "slides/complete.html#application-6",
    "href": "slides/complete.html#application-6",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 6",
    "text": "Application 6\n\n\n\nBranches, issues et pull requests\n\n\n\n\nSur Github / Gitlab, chaque personne ouvre une Issue sur le m√™me d√©p√¥t que les applications pr√©c√©dentes, dans laquelle vous sugg√©rez une modification √† apporter √† votre projet\nCr√©er une branche dont le nom indique la modification que vous allez apporter (ex : ajout-authentification)\nEffectuer un commit avec les modifications de votre choix, puis pousser les changements sur une nouvelle branche du d√©p√¥t distant\nOuvrir une Pull Request (PR) pour proposer d‚Äôint√©grer vos changements sur la branche principale du d√©p√¥t distant. Sp√©cifier que l‚Äôacceptation de la Pull Request entra√Ænera la fermeture automatique de l‚ÄôIssue associ√©e en √©crivant dans le corps de la PR : close #N o√π N est le num√©ro de l‚ÄôIssue en question\nChaque personne effectue finalement une review d‚Äôune PR d‚Äôun autre membre de l‚Äô√©quipe, suite √† quoi les diff√©rentes PR peuvent √™tre fusionn√©es\n\n\n\n\n\n‚ùì Question : quelle organisation pour merge dans la branche principale ?"
  },
  {
    "objectID": "slides/complete.html#application-7",
    "href": "slides/complete.html#application-7",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 7",
    "text": "Application 7\n\n\n\nContribuer √† un projet collaboratif\n\n\nL‚Äôobjectif de cette application est d‚Äôinitier au mode de contribution √† un d√©p√¥t collaboratif. Concr√®tement, vous allez ouvrir une Issue sur un d√©p√¥t d‚Äôun autre d√©veloppeur, en proposant des modifications. Puis, comme vous √™tes tr√®s motiv√©s, vous allez soumettre une Pull Request qui propose une solution √† l‚ÄôIssue.\n\n\nOuvrir une Issue sur le d√©p√¥t git-exo en sugg√©rant une modification √† apporter au fichier README.md\nSur GitHub, faire un Fork du d√©p√¥t git-exo\nCr√©er une branche portant un nom pertinent au vu de la modification que vous voulez apporter\nEffectuer un commit avec les modifications de votre choix, puis pousser les changements sur votre Fork\nOuvrir une Pull Request (PR) pour proposer d‚Äôint√©grer vos changements dans la branche principale (main) du d√©p√¥t git-exo\nDans le corps de votre PR, indiquez close #N o√π N est le num√©ro de votre Issue. Comme √ßa, lorsque la PR sera accept√©e, l‚ÄôIssue initiale sera automatiquement ferm√©e !\n\n\n\n\n\n‚ùì Question : pourquoi, avec un fork, est-il tr√®s important de toujours effectuer une Pull Request √† partir d‚Äôune branche diff√©rente de la branche principale ?"
  },
  {
    "objectID": "slides/complete.html#ressources-suppl√©mentaires",
    "href": "slides/complete.html#ressources-suppl√©mentaires",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\nLa documentation utilitR propose plusieurs chapitres sur Git\nCours Reproductibilit√© et bonnes pratiques pour les projets de data science de l‚ÄôENSAE\nLa Bible de l‚Äôusage de Git"
  },
  {
    "objectID": "slides/complete.html#plan-de-la-partie-1",
    "href": "slides/complete.html#plan-de-la-partie-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Plan de la partie",
    "text": "Plan de la partie\n1Ô∏è‚É£ Qualit√© du code\n2Ô∏è‚É£ Structure des projets\n3Ô∏è‚É£ Formats de donn√©es\n4Ô∏è‚É£ Environnements reproductibles\n5Ô∏è‚É£ R en production"
  },
  {
    "objectID": "slides/complete.html#application-0-1",
    "href": "slides/complete.html#application-0-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 0",
    "text": "Application 0\n\n insee\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCr√©er un d√©p√¥t sur Github  en incluant un fichier README et un .gitignore (chercher le mod√®le R dans les suggestions)\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants GitHub √† une valeur suffisamment √©lev√©e (conseil: 36000)\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio du Datalab):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nCr√©er un script get_data.R en copiant le contenu de ce fichier, puis l‚Äôex√©cuter\nCr√©er le script script.R dans votre d√©p√¥t en copiant le contenu de ce fichier. Ne l‚Äôex√©cutez pas, c‚Äôest l‚Äôobjet de l‚Äôexercice suivant.\nAjouter la r√®gle ‚ÄúRPindividus*‚Äù au fichier .gitignore. Que signifie-t-elle ?\nCommit/push les changements (tous les fichiers, y compris ceux que Git a ajout√©)\n\n\n\n\n\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCr√©er un nouveau d√©p√¥t public sur GitLab\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants GitLab √† une valeur suffisamment √©lev√©e\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio de LS3):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nCr√©er un script get_data.R en copiant le contenu de ce fichier, puis l‚Äôex√©cuter\nCr√©er le script script.R dans votre d√©p√¥t en copiant le contenu de ce fichier\nAjouter la r√®gle ‚Äúindividu_reg.*‚Äù au fichier .gitignore. Que signifie-t-elle ?\nCommit/push les changements"
  },
  {
    "objectID": "slides/complete.html#enjeux",
    "href": "slides/complete.html#enjeux",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nD‚Äôune vision utilitariste du code √† une vision du code comme outil de communication\nFavoriser la lisibilit√© et la maintenabilit√©\nFaciliter la r√©utilisation\nAssurer la transparence m√©thodologique"
  },
  {
    "objectID": "slides/complete.html#principes-g√©n√©raux",
    "href": "slides/complete.html#principes-g√©n√©raux",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Principes g√©n√©raux",
    "text": "Principes g√©n√©raux\n1Ô∏è‚É£ Adopter les standards communautaires\n2Ô∏è‚É£ Eviter la duplication de code\n3Ô∏è‚É£ (Auto)-documenter son code\n4Ô∏è‚É£ Isoler la configuration du code"
  },
  {
    "objectID": "slides/complete.html#adopter-les-standards-communautaires",
    "href": "slides/complete.html#adopter-les-standards-communautaires",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Adopter les standards communautaires",
    "text": "1Ô∏è‚É£ Adopter les standards communautaires\n\n‚ÄúGood coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread‚Äù\nTidyverse Style Guide\n\n\nRespecter les conventions du langage dans lequel il est r√©dig√©\nIl existe un guide de r√©f√©rence pour bien coder en R : le Tidyverse style guide."
  },
  {
    "objectID": "slides/complete.html#adopter-les-standards-communautaires-1",
    "href": "slides/complete.html#adopter-les-standards-communautaires-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Adopter les standards communautaires",
    "text": "1Ô∏è‚É£ Adopter les standards communautaires\nDeux outils pratiques aident √† respecter les standards :\n\nlinter : programme qui v√©rifie que le code est formellement conforme √† un certain guidestyle\n\nsignale probl√®mes formels, sans corriger\n\nformatter : programme qui reformate un code pour le rendre conforme √† un certain guidestyle\n\nmodifie directement le code\n\n\n\n\n\n\n\n\n\nAstuce\n\n\n\n\nExemples d‚Äôerreurs rep√©r√©es par un linter :\n\nlignes de code trop longues ou mal indent√©es, parenth√®ses non √©quilibr√©es, noms de fonctions mal construits‚Ä¶\n\nExemples d‚Äôerreurs non rep√©r√©es par un linter :\n\nfonctions mal utilis√©es, arguments mal sp√©cifi√©s, structure du code incoh√©rente, code insuffisamment document√©‚Ä¶"
  },
  {
    "objectID": "slides/complete.html#adopter-les-standards-communautaires-2",
    "href": "slides/complete.html#adopter-les-standards-communautaires-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Adopter les standards communautaires",
    "text": "1Ô∏è‚É£ Adopter les standards communautaires\n\nDans le cas de  :\n\nle linter √† utiliser est le package lintr\nle formatter √† utiliser est le package styler.\n\nExiste √©galement le package formatR."
  },
  {
    "objectID": "slides/complete.html#utiliser-des-fonctions",
    "href": "slides/complete.html#utiliser-des-fonctions",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Utiliser des fonctions",
    "text": "2Ô∏è‚É£ Utiliser des fonctions\n\n\n\n\n\n\nR√®gle d‚Äôor\n\n\nIl faut utiliser une fonction d√®s qu‚Äôon utilise une m√™me portion de code plus de deux fois (don‚Äôt repeat yourself (DRY))\n\n\n\n\nLimite les risques d‚Äôerreurs li√©s aux copier/coller\nRend le code plus lisible et plus compact\nUn seul endroit du code √† modifier lorsqu‚Äôon souhaite modifier le traitement\nFacilite la r√©utilisation et la documentation du code !\n\n\n\n\n\n\n\n\nR√®gles pour √©crire des fonctions pertinentes\n\n\n\n\nUne t√¢che = une fonction\nUne t√¢che complexe = un encha√Ænement de fonctions r√©alisant chacune une t√¢che simple\nLimiter l‚Äôutilisation de variables globales."
  },
  {
    "objectID": "slides/complete.html#documenter-son-code",
    "href": "slides/complete.html#documenter-son-code",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Documenter son code",
    "text": "3Ô∏è‚É£ Documenter son code\n\nGrands principes :\n\nDocumenter le pourquoi plut√¥t que le comment\nPrivil√©gier l‚Äôauto-documentation\n\n\n\n\n\n\n\n\n\nComment bien documenter un script ?\n\n\n\n\nMinimum üö¶ : commentaire au d√©but du script pour d√©crire ce qu‚Äôil fait\nBien üëç : commenter les parties ‚Äúd√©licates‚Äù du code\nId√©al üí™ : documenter ses fonctions avec la syntaxe roxygen2."
  },
  {
    "objectID": "slides/complete.html#documenter-son-code-1",
    "href": "slides/complete.html#documenter-son-code-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Documenter son code",
    "text": "3Ô∏è‚É£ Documenter son code\n\n\n\n\n\n\nL‚Äôauto-documentation en pratique\n\n\nüëé La documentation pallie des mauvais nommages\n# Utilise string si x est non manquant et non vide\nif (!is.na(x) && nzchar(x)) {\n  use_string(x)\n}\nüëç Les nommages suffisent √† comprendre le code\nx_is_not_empty_string &lt;- (!is.na(x) && nzchar(x))\nif (x_is_not_empty_string) {\n  use_string(x)\n}"
  },
  {
    "objectID": "slides/complete.html#isoler-la-configuration-du-code",
    "href": "slides/complete.html#isoler-la-configuration-du-code",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Isoler la configuration du code",
    "text": "4Ô∏è‚É£ Isoler la configuration du code\n\nRappel : on vise une structure modulaire\n\n\n\n\nEn pratique : isoler les packages et les secrets"
  },
  {
    "objectID": "slides/complete.html#gestion-des-packages",
    "href": "slides/complete.html#gestion-des-packages",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Gestion des packages",
    "text": "4Ô∏è‚É£ Gestion des packages\n\nExternaliser l‚Äôinstallation des packages n√©cessaires\n\nLe code ne doit pas modifier l‚Äôenvironnement\nO√π ? Dans le README ou des fichiers sp√©cialis√©s (DESCRIPTION ou renv.lock)\n\nExpliciter l‚Äôappel des packages avec la syntaxe package::fonction()\n\nFavorise la lisibilit√© du code\nLimite les risques de fonctions ‚Äúmasqu√©es‚Äù\n\n\n\n\n\n\n\n\n\nExemple\n\n\n\n\npackage1 et package2 contiennent chacun une fonction appel√©e super_fonction.\nSi package2 est charg√© apr√®s package1, alors la fonction de package1 est automatiquement masqu√©e et super_fonction d√©signe par d√©faut la fonction de package2.\nMieux vaut noter package1::superFonction et package2::superFonction"
  },
  {
    "objectID": "slides/complete.html#gestion-des-secrets",
    "href": "slides/complete.html#gestion-des-secrets",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Gestion des secrets",
    "text": "4Ô∏è‚É£ Gestion des secrets\n\nLes secrets (mots de passe, tokens, etc.) sont des donn√©es sensibles\nQuelques principes de s√©curit√© essentiels\n\nUtiliser des tokens plut√¥t que des mots de passe\nUtiliser des comptes de service (quand c‚Äôest possible)\nJamais de secrets en clair dans le code\n\nEn pratique, deux recommendations selon l‚Äôusage\n\nDemander interactivement le secret √† l‚Äôutilisateur\nSp√©cifier des variables d‚Äôenvironnement via le fichier .Renviron (‚ö†Ô∏è √† ajouter au .gitignore)"
  },
  {
    "objectID": "slides/complete.html#ressources-suppl√©mentaires-1",
    "href": "slides/complete.html#ressources-suppl√©mentaires-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\n\nUne pr√©sentation de Ma√´lle Salmon sur le ¬´ code beau ¬ª.\nUne pr√©sentation tr√®s compl√®te sur le partage de code et de donn√©es avec R\nUne documentation (en anglais) sur la gestion des secrets (tokens, mots de passe, etc.)"
  },
  {
    "objectID": "slides/complete.html#application-1-1",
    "href": "slides/complete.html#application-1-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 1 : v√©rification du bon fonctionnement du code\n\n\nUn code reproductible est avant toute chose un code fonctionnel !\n\nRep√©rez les erreurs qui emp√™chent le script script.R de s‚Äôex√©cuter correctement, et les corriger.\nRed√©marrer votre session avec Session &gt; New Session (ou Ctrl+Maj+F10)\n\n\n\n\n\n\n\n\n\n\nLes pi√®ges que cet exercice vous montre\n\n\n\n\nLes fonctions utilis√©es sans import des packages\nLes chemins et le working directory\nL‚Äôordre des imports\nLes mauvaises pratiques de gestion de l‚Äôenvironnement (les bonnes pratiques arrivent dans les prochains exercices !)"
  },
  {
    "objectID": "slides/complete.html#application-1-2",
    "href": "slides/complete.html#application-1-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 2 : premiers standards de qualit√©\n\n\n\n\nInstaller les packages R lintr et styler1.\nD√©finir le linter √† utiliser comme √©tant de type tidyverse avec lintr::use_lintr(type = \"tidyverse\")\nDiagnostiquer le script script.R avec lintr::lint(\"script.R\").\n\nComprenez-vous la nature des probl√®mes d√©tect√©s par le linter?\n\nAppliquer le formatter au script.R avec styler::style_file(\"script.R\").\nRefaire tourner le linter. Il reste encore un certain nombre d‚Äôerreurs de formattage, car styler est un formatter peu intrusif.\nRegarder les probl√®mes restants rep√©r√©s par le linter, et en corriger quelques uns (un pour chaque type de probl√®me).\n\n\n\n\n\nLes install.packages sont √† faire en console et ne doivent pas √™tre mis dans le script (justification dans la prochaine partie de cet exercice)."
  },
  {
    "objectID": "slides/complete.html#application-1-3",
    "href": "slides/complete.html#application-1-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 3 : une meilleure gestion des packages utilis√©s\n\n\n\n\nLimiter les ambiguit√©s sur les packages en utilisant la syntaxe package::fonction pour les packages rarement utilis√©s dans le script.\nL‚Äôinstallation des packages dans un script n‚Äôest pas une bonne pratique. Supprimer les instructions correspondantes.\nImporter le tidyverse au complet est rarement utile. N‚Äôimporter √† la place que les packages effectivement utilis√©s dans le script.\n\n\n\nA propos du rm(list = ls()) (le supprimer !)\n\nCette commande est une mauvaise pratique.\nOn la retrouve encore dans trop de scripts car elle est utilis√©e pour de mauvaises raisons. Elle ne remets pas √† 0 votre environnement: elle supprime juste les donn√©es de celui-ci, sans toucher au reste (packages import√©s, etc.).\nIl vaut mieux g√©rer cela en changeant les options de  puis red√©marrer la session  (CTRL+SHIFT+F10)"
  },
  {
    "objectID": "slides/complete.html#application-1-4",
    "href": "slides/complete.html#application-1-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 4 : (auto-)documentation du code\n\n\n\nL‚Äôobjectif de cet exercice est de remettre de l‚Äôordre dans le script, cela le rendra bien plus lisible.\n\nD√©placer les library pour les mettre tous ensemble au d√©but du script.\nLe script n‚Äôest pas construit dans un ordre logique. D√©placer les parties pour adopter une structure plus lisible :\n\nGestion de l‚Äôenvironnement -&gt; D√©finition de fonctions -&gt; Import des donn√©es -&gt; Retraitement des donn√©es -&gt; Statistiques descriptives -&gt; Graphiques -&gt; Mod√©lisation\n\nDonner des titres aux parties/sous-parties en utilisant les standards de documentation reconnus par RStudio :\n\n# TITRE NIVEAU 1 ------------ et ## TITRE NIVEAU 2 ==========\n\n\nAu passage, vous pouvez changer les noms de certains objets pour les rendre moins cryptiques (df3 n‚Äôest pas tr√®s clair)."
  },
  {
    "objectID": "slides/complete.html#application-1-5",
    "href": "slides/complete.html#application-1-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 5 : une meilleure gestion des secrets\n\n\n\nDans cette application, on va explorer deux mani√®res possibles de g√©rer les secrets proprement.\nPremi√®re possibilit√© : de mani√®re interactive.\n\nRep√©rer le jeton d‚ÄôAPI dans le code et le retirer, en le stockant temporairement ailleurs.\nUtiliser la fonction askForPassword du package rstudioapi, qui permet de demander √† l‚Äôutilisateur d‚Äôentrer le secret √† l‚Äôaide d‚Äôun pop-up interactif.\nV√©rifier le bon fonctionnement de la solution impl√©ment√©e.\n\n‚ö†Ô∏è Cette solution n√©cessite l‚Äôex√©cution du code dans un environnement RStudio, ce qui implique un usage en self.\nDeuxi√®me possibilit√© : via les variables d‚Äôenvironnement.\n\nSupprimer la solution pr√©c√©dente (pop-up interactif) et red√©marrer le kernel R\nCr√©er un fichier .Renviron (voir cette fiche UtilitR pour plus d‚Äôinfo sur ce fichier) √† la racine du projet et y ajouter une ligne JETON_API=xxx en rempla√ßant xxx par la valeur du jeton.\nImporter la valeur du jeton dans une variable api_token √† l‚Äôaide de la fonction Sys.getenv.\nV√©rifier le bon fonctionnement de la solution impl√©ment√©e.\nV√©rifier que l‚Äôexclusion du .Renviron est bien renseign√© dans le .gitignore. Si ce n‚Äôest pas le cas, ajouter la r√®gle et v√©rifier son bon fonctionnement, puis commit/push."
  },
  {
    "objectID": "slides/complete.html#checkpoint",
    "href": "slides/complete.html#checkpoint",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Checkpoint",
    "text": "Checkpoint\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script script.R\nLe .gitignore"
  },
  {
    "objectID": "slides/complete.html#bilan",
    "href": "slides/complete.html#bilan",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bilan",
    "text": "Bilan\n\n\n\nUn code mal structur√©\n\nLimite la lisibilit√© du projet\nEst tr√®s co√ªteux √† maintenir (dette technique)\n\nLes petits gestes peuvent √©conomiser un temps pr√©cieux"
  },
  {
    "objectID": "slides/complete.html#enjeux-1",
    "href": "slides/complete.html#enjeux-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nFavoriser la lisibilit√© et la maintenabilit√©\nConstruire des projets reproductibles"
  },
  {
    "objectID": "slides/complete.html#a-ne-pas-reproduire-chez-vous",
    "href": "slides/complete.html#a-ne-pas-reproduire-chez-vous",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ö†Ô∏è A ne pas reproduire chez vous",
    "text": "‚ö†Ô∏è A ne pas reproduire chez vous\n\n‚îú‚îÄ‚îÄ report.Rmd\n‚îú‚îÄ‚îÄ correlation.png\n‚îú‚îÄ‚îÄ data.csv\n‚îú‚îÄ‚îÄ data2.csv\n‚îú‚îÄ‚îÄ fig1.png\n‚îú‚îÄ‚îÄ figure 2 (copy).png\n‚îú‚îÄ‚îÄ report.pdf\n‚îú‚îÄ‚îÄ partial data.csv\n‚îú‚îÄ‚îÄ script.R\n‚îî‚îÄ‚îÄ script_final.R\nSource : eliocamp.github.io"
  },
  {
    "objectID": "slides/complete.html#principes-g√©n√©raux-1",
    "href": "slides/complete.html#principes-g√©n√©raux-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Principes g√©n√©raux",
    "text": "Principes g√©n√©raux\n\nUtiliser les projets RStudio\nOrganiser son projet en sous-dossiers\nDonner des noms pertinents aux fichiers\nDocumenter son projet\n(Faire de son projet un package)"
  },
  {
    "objectID": "slides/complete.html#utiliser-les-projets-rstudio",
    "href": "slides/complete.html#utiliser-les-projets-rstudio",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Utiliser les projets RStudio",
    "text": "1Ô∏è‚É£ Utiliser les projets RStudio\n\nObjectif : favoriser la reproductibilit√©\n\nTous les fichiers n√©cessaires au projet dans un m√™me dossier\nLe dossier contenant le projet RStudio est automatiquement utilis√© comme working directory\nUtilisation de chemins relatifs plut√¥t qu‚Äôabsolus.\n\nBonus : en utilisant Git, on s‚Äôassure de toujours travailler dans un projet RStudio !"
  },
  {
    "objectID": "slides/complete.html#organiser-son-projet-en-sous-dossiers",
    "href": "slides/complete.html#organiser-son-projet-en-sous-dossiers",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Organiser son projet en sous-dossiers",
    "text": "2Ô∏è‚É£ Organiser son projet en sous-dossiers\n\n\nObjectif : adopter une structure arbitraire, mais lisible et coh√©rente\n\n‚îú‚îÄ‚îÄ data\n‚îÇ   ‚îú‚îÄ‚îÄ raw\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data.csv\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data2.csv\n‚îÇ   ‚îî‚îÄ‚îÄ derived\n‚îÇ       ‚îî‚îÄ‚îÄ partial data.csv\n‚îú‚îÄ‚îÄ R\n|   ‚îú‚îÄ‚îÄ script.R\n‚îÇ   ‚îú‚îÄ‚îÄ script_final.R\n‚îÇ   ‚îî‚îÄ‚îÄ report.Rmd\n‚îî‚îÄ‚îÄ output\n    ‚îú‚îÄ‚îÄ fig1.png\n    ‚îú‚îÄ‚îÄ figure 2 (copy).png\n    ‚îú‚îÄ‚îÄ figure10.png\n    ‚îú‚îÄ‚îÄ correlation.png\n    ‚îî‚îÄ‚îÄ report.pdf"
  },
  {
    "objectID": "slides/complete.html#donner-des-noms-pertinents-aux-fichiers",
    "href": "slides/complete.html#donner-des-noms-pertinents-aux-fichiers",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Donner des noms pertinents aux fichiers",
    "text": "3Ô∏è‚É£ Donner des noms pertinents aux fichiers\n\n\nObjectif : auto-documenter son projet\n\n‚îú‚îÄ‚îÄ data\n‚îÇ   ‚îú‚îÄ‚îÄ raw\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dpe_logement_202103.csv\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dpe_logement_202003.csv\n‚îÇ   ‚îî‚îÄ‚îÄ derived\n‚îÇ       ‚îî‚îÄ‚îÄ dpe_logement_merged_preprocessed.csv\n‚îú‚îÄ‚îÄ R\n|   ‚îú‚îÄ‚îÄ preprocessing.R\n‚îÇ   ‚îú‚îÄ‚îÄ generate_plots.R\n‚îÇ   ‚îî‚îÄ‚îÄ report.Rmd\n‚îî‚îÄ‚îÄ output\n    ‚îú‚îÄ‚îÄ histogram_energy_diagnostic.png\n    ‚îú‚îÄ‚îÄ barplot_consumption_pcs.png\n    ‚îú‚îÄ‚îÄ correlation_matrix.png\n    ‚îî‚îÄ‚îÄ report.pdf"
  },
  {
    "objectID": "slides/complete.html#documenter-son-projet",
    "href": "slides/complete.html#documenter-son-projet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Documenter son projet",
    "text": "4Ô∏è‚É£ Documenter son projet\n\nLe fichier README.md, situ√© √† la racine du projet, est √† la fois la carte d‚Äôidentit√© et la vitrine du projet\nId√©alement, il contient :\n\nUne pr√©sentation du contexte et des objectifs\nUne description de son fonctionnement\nUn guide de contribution (open-source)\n\nQuelques mod√®les de README.md complets :\n\nutilitR\nDoReMIFaSol"
  },
  {
    "objectID": "slides/complete.html#faire-de-son-projet-un-package",
    "href": "slides/complete.html#faire-de-son-projet-un-package",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "5Ô∏è‚É£ Faire de son projet un package",
    "text": "5Ô∏è‚É£ Faire de son projet un package\n\nUn package est la forme maximale de modularit√©\n\nContient des fonctions rang√©es dans des modules\nContient √©galement de la documentation, des tests, des (m√©ta-)donn√©es‚Ä¶\n\nAvantages\n\nId√©al pour favoriser la r√©utilisation du code\nDes outils de d√©veloppement : devtools et usethis\n\nInconv√©nients\n\nCo√ªt de maintenance √©lev√©"
  },
  {
    "objectID": "slides/complete.html#ressources-suppl√©mentaires-2",
    "href": "slides/complete.html#ressources-suppl√©mentaires-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\n\nLa documentation utilitR sur les projets RStudio et les packages R\nLa bible des packages R"
  },
  {
    "objectID": "slides/complete.html#application-2-1",
    "href": "slides/complete.html#application-2-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 2",
    "text": "Application 2\n\n\n\nPartie 1 : modularisation du projet\n\n\n\n\nD√©placer toutes les fonctions dans un fichier R/functions.R.\nDonner √† la fonction fonction_de_stat_agregee un nom plus pertinent et des noms d‚Äôarguments plus transparents.\n\nDocumenter la fonction fonction_de_stat_agregee selon le standard roxygen. Vous pouvez vous aider d‚Äôune IA assistante comme ChatGPT, Claude ou Copilot, rien n‚Äôest sensible dans ce code (d‚Äôailleurs rien de sensible ne doit √™tre dans du code !).\nUtiliser les exemples d‚Äôutilisation de fonction_de_stat_agregee dans cette documentation.\n\nDans script.R, appeler en d√©but de cha√Æne ces fonctions avec source(\"R/functions.R\", encoding = \"UTF-8\").\nTester le bon fonctionnement de script.R.\nSi votre cha√Æne √©crit des outputs ou utilise des inputs (par exemple des donn√©es), restructurer l‚Äôaborescence du projet pour le rendre plus lisible et adaptez votre code en fonction.\nRenommer (voire d√©placer) les scripts get_data.R et script.R pour rendre plus intelligible la cha√Æne de production.\nMettre √† jour le .gitignore puis commit/push."
  },
  {
    "objectID": "slides/complete.html#application-2-2",
    "href": "slides/complete.html#application-2-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 2",
    "text": "Application 2\n\n\n\nPartie 2 : cr√©ation d‚Äôun package (FACULTATIF)\n\n\n\n\nFermer le Rproj en cours (‚ÄúClose Project‚Äù en haut √† droite).\nInitialiser un package avec la fonction usethis::create_package() (par d√©faut dans le working directory)\nPlacer dans le dossier R du package un module stat.R et y copier la fonction de statistique agr√©g√©e\nRemplir le fichier DESCRIPTION. En particulier, sp√©cifier les d√©pendances n√©cessaires (Imports) et facultatives (Suggests)\nConstruire la documentation du package avec la fonction devtools::document(). O√π est-elle stock√©e et sous quel format ?\nCharger le package avec la fonction devtools::load_all() et v√©rifier que la fonction marche correctement\nV√©rifier que la documentation de notre fonction est accessible avec ?ma_fonction\n(Facultatif) Initialiser un nouveau projet sur GitHub est y mettre le code du package. V√©rifier que le package peut √™tre install√© en local avec la fonction devtools::install_github()."
  },
  {
    "objectID": "slides/complete.html#checkpoint-2",
    "href": "slides/complete.html#checkpoint-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Checkpoint",
    "text": "Checkpoint\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script script.R\nLe script R/functions.R"
  },
  {
    "objectID": "slides/complete.html#enjeux-2",
    "href": "slides/complete.html#enjeux-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix d‚Äôun format de donn√©es r√©pond √† un arbitrage entre plusieurs crit√®res :\n\nPublic cible\nFinalit√© (traitement, analyse, diffusion)\nVolum√©trie\nInterop√©rabilit√©"
  },
  {
    "objectID": "slides/complete.html#formats-traditionnels",
    "href": "slides/complete.html#formats-traditionnels",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Formats traditionnels",
    "text": "Formats traditionnels\n\nFormats de donn√©es adh√©rents √† un langage (sas7bdat, RDS, fst, etc.)\n\nNon-interop√©rables -&gt; √† √©viter !\n\nLe format CSV\n\nInterop√©rable et simple d‚Äôutilisation\nPas de gestion des m√©ta-donn√©es\nPeu adapt√© aux donn√©es volumineuses"
  },
  {
    "objectID": "slides/complete.html#limites-du-csv",
    "href": "slides/complete.html#limites-du-csv",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Limites du CSV",
    "text": "Limites du CSV\n\nDes performances limit√©es\n\nStockage : non-compress√© -&gt; espace disque √©lev√©\nLecture : ‚Äúorient√©-ligne‚Äù -&gt; performances faibles"
  },
  {
    "objectID": "slides/complete.html#le-format-parquet",
    "href": "slides/complete.html#le-format-parquet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nStockage :\n\nCompression : entre 5 et 20 fois plus l√©ger qu‚Äôun CSV\n\n\n\n\n\n\n\n\n\n\nExemple: Recensement de la Population\n\n\n\nFicher d√©tail : 20 millions de lignes, 92 variables\n\nCSV: &gt; 4Go\nParquet: &lt; 500Mo"
  },
  {
    "objectID": "slides/complete.html#le-format-parquet-1",
    "href": "slides/complete.html#le-format-parquet-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nLecture :\n\nJusqu‚Äô√† 34x plus rapide qu‚Äôun CSV\n\n‚ÄúOrient√© colonne‚Äù\n\nOptimis√© pour les traitements analytiques\nLimite la quantit√© de donn√©es √† mettre en m√©moire"
  },
  {
    "objectID": "slides/complete.html#le-format-parquet-2",
    "href": "slides/complete.html#le-format-parquet-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nPartitionner les donn√©es pour optimiser la lecture\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nL‚Äôart de bien partitionner\n\n\n\nPartitionner par une/des variable(s) d‚Äôint√©r√™t\nEviter de cr√©er de nombreux petits (&lt; 128Mo) fichiers"
  },
  {
    "objectID": "slides/complete.html#le-format-parquet-3",
    "href": "slides/complete.html#le-format-parquet-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nGestion native des m√©ta-donn√©es\n\nD√©finition automatique d‚Äôun sch√©ma (noms, types)\nMise √† disposition plus robuste\n\nInterop√©rable\nOpen-source"
  },
  {
    "objectID": "slides/complete.html#le-format-parquet-4",
    "href": "slides/complete.html#le-format-parquet-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nDeux frameworks de r√©f√©rence : Arrow et DuckDB\n\nOrientation fichier (Arrow) VS orientation BDD (DuckDB)\nTr√®s bonne int√©gration avec le tidyverse\n\nTraitement en-m√©moire optimis√©\n\nOrient√©s-colonne\nLazy evaluation\n\n\n\n\n\n\n\n\n\n\nExemple d‚Äôune requ√™te lazy\n\n\nn_logements_depcom &lt;- achille |&gt; \n  filter(dep %in% c(\"01\", \"02\", \"03\")) |&gt;  # R√©cup√®re seulement les donn√©es n√©cessaires\n  select(idlogement, depcom) |&gt;  # R√©cup√®re seulement les colonnes n√©cessaires\n  group_by(depcom) |&gt;\n  summarise(n_logements = n()) |&gt;  \n  collect()  # Les calculs ne sont effectu√©s qu'√† cette √©tape !"
  },
  {
    "objectID": "slides/complete.html#le-format-parquet-5",
    "href": "slides/complete.html#le-format-parquet-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nParquet gagne sur tous les tableaux"
  },
  {
    "objectID": "slides/complete.html#application-3-1",
    "href": "slides/complete.html#application-3-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n insee\n\n\n\n\n\n\nPartie 0 : pr√©paration\n\n\n\nRemplacer le contenu du script get_data.R en copiant-collant le contenu de ce fichier. Ex√©cuter ce script, il importe les fichiers n√©cessaires pour cette application.\n\n\n\n\n\n\n\n\n\n\n\nPartie 0 : pr√©paration\n\n\n\nRemplacer le contenu du script get_data_ls3.R en copiant-collant le contenu de ce fichier. Ex√©cuter ce script, il importe les fichiers n√©cessaires pour cette application."
  },
  {
    "objectID": "slides/complete.html#application-3-2",
    "href": "slides/complete.html#application-3-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 1 : Du CSV au Parquet\n\n\nTout au long de cette application, nous allons voir comment utiliser le format Parquet de mani√®re la plus efficiente. Afin de comparer les diff√©rents formats et m√©thodes d‚Äôutilisation, nous allons comparer le temps d‚Äôex√©cution et l‚Äôusage m√©moire d‚Äôune requ√™te standard. Commen√ßons par comparer les formats CSV et Parquet.\n\nRemplacer le contenu du script get_data.R en copiant-collant le contenu de ce fichier. Ex√©cuter ce script, il importe les fichiers n√©cessaires dans cette application\nPour effectuer les comparaisons de performance, on va utiliser la fonction bench::mark. Analyser la documentation pour comprendre ce que la fonction attend en entr√©e.\nLa requ√™te suivante permet de calculer les donn√©es pour construire une pyramide des √¢ges sur un d√©partement donn√©, √† partir du fichier CSV du recensement. Encapsuler la requ√™te dans une fonction req_csv (sans argument).\n\nres &lt;- readr::read_csv(\"data/RPindividus_24.csv\") %&gt;% \n    filter(DEPT == \"36\") %&gt;%\n    group_by(AGED, DEPT) %&gt;%\n    summarise(n_indiv = sum(IPONDI))\n\nSur le m√™me mod√®le, construire une fonction req_read_parquet bas√©e cette fois sur le fichier data/RPindividus_24.parquet charg√© avec la fonction read_parquet d‚ÄôArrow\nComparer les performances (temps d‚Äôex√©cution et allocation m√©moire) de ces deux m√©thodes gr√¢ce √† la fonction bench::mark, √† laquelle on passera les param√®tres iterations = 1 (comparaison √† partir d‚Äôune seule it√©ration) et check = FALSE (autorise les outputs des deux fonctions √† √™tre diff√©rents).\n\n\n\n\n\n‚ùìÔ∏è Quelle semble √™tre la limite de la fonction read_parquet ?"
  },
  {
    "objectID": "slides/complete.html#application-3-3",
    "href": "slides/complete.html#application-3-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 2 : Exploiter la lazy evaluation et les optimisations d‚ÄôArrow\n\n\nLa partie pr√©c√©dente a montr√© un gain de temps consid√©rable du passage de CSV √† Parquet. N√©anmoins, l‚Äôutilisation m√©moire √©tait encore tr√®s √©lev√©e alors qu‚Äôon utilise de fait qu‚Äôune infime partie du fichier. Dans cette partie, on va voir comment utiliser la lazy evaluation et les optimisations du plan d‚Äôex√©cution effectu√©es par Arrow pour exploiter pleinement la puissance du format Parquet.\n\nUtiliser la fonction arrow::open_dataset pour ouvrir le fichier data/RPindividus_24.parquet. Regarder la classe de l‚Äôobjet obtenu.\nAfficher les 5 premi√®res lignes de la table avec la fonction head(). Observer l‚Äôobjet obtenu (sortie en console, classe).\nAjouter une √©tape collect() √† la fin de cette cha√Æne. Comprenez-vous la diff√©rence ?\nConstruire une fonction req_open_dataset sur le mod√®le de celles de la partie pr√©c√©dente, qui importe cette fois les donn√©es avec la fonction arrow::open_dataset\nComparer les performances (temps d‚Äôex√©cution et allocation m√©moire) des trois m√©thodes (CSV, read_parquet et open_dataset) gr√¢ce √† la fonction bench::mark\n\n\n\n\n\n‚ùìÔ∏è Quelle m√©thode retenir pour lire un Parquet avec Arrow ?"
  },
  {
    "objectID": "slides/complete.html#application-3-4",
    "href": "slides/complete.html#application-3-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 3 : Le Parquet partitionn√©\n\n\nLa lazy evaluation et les optimisations d‚ÄôArrow apportent des gain de performance consid√©rables. Mais on peut encore faire mieux ! Lorsqu‚Äôon sait qu‚Äôon va √™tre amen√© √† filter r√©guli√®rement les donn√©es selon une variable d‚Äôint√©r√™t, on a tout int√©r√™t √† partitionner le fichier Parquet selon cette variable.\n\nParcourir la documentation de la fonction arrow::write_dataset pour comprendre comment sp√©cifier la cl√© de partitionnement d‚Äôun fichier Parquet. Plusieurs m√©thodes sont possibles !\nDans une m√™me cha√Æne, importer la table individus compl√®te du recensement data/RPindividus.parquet avec la fonction arrow::open_dataset et l‚Äôexporter en une table data/RPindividus_dept.parquet partitionn√©e par le d√©partement (DEPT)\nObserver l‚Äôarborescence de fichiers de la table export√©e\nModifier la fonction req_open_dataset de la partie pr√©c√©dente pour partir de la table compl√®te (non-partitionn√©e) data/RPindividus.parquet au lieu de l‚Äô√©chantillon\nConstruire une fonction req_open_dataset_part sur le mod√®le de req_open_dataset, qui importe cette fois les donn√©es partitionn√©es data/RPindividus_dept.parquet. Ne pas oublier de sp√©cifier le param√®tre hive_style = TRUE.\nComparer les performances (temps d‚Äôex√©cution et allocation m√©moire) des deux m√©thodes gr√¢ce √† la fonction bench::mark\n\n\n\n\n\n\n‚ùìÔ∏è Dans le cadre d‚Äôune mise √† disposition de donn√©es en Parquet aupr√®s d‚Äôutilisateurs :\n\nComment bien choisir la/les cl√©(s) de partitionnement ?\nQuelle est la limite √† garder en t√™te ?"
  },
  {
    "objectID": "slides/complete.html#application-3-5",
    "href": "slides/complete.html#application-3-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 4 : mise √† jour de la cha√Æne de production\n\n\nConvaincus par ce comparatif, nous allons maintenant mettre √† jour le format des donn√©es utilis√©es pour notre cha√Æne de production.\n\nModifier le script script.R pour importer les donn√©es d‚Äôentr√©e de votre cha√Æne √† partir de la table Parquet partitionn√©e par d√©partement\nV√©rifier que le code tourne de A √† Z et l‚Äôadapter si ce n‚Äôest pas le cas\n\n\n\n\n\n‚ùìÔ∏è Cette mise √† jour des donn√©es utilis√©es en source de la cha√Æne de production vous semble-t-elle complexe ? Pourquoi ?"
  },
  {
    "objectID": "slides/complete.html#checkpoint-4",
    "href": "slides/complete.html#checkpoint-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Checkpoint",
    "text": "Checkpoint\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script script.R"
  },
  {
    "objectID": "slides/complete.html#enjeux-3",
    "href": "slides/complete.html#enjeux-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nImaginons la situation suivante :\n\nJ‚Äôinstalle une version de R sur mon poste\nJe d√©veloppe un projet en installant les packages n√©cessaires\nUne fois termin√©, je passe au projet suivant, et ainsi de suite.\n\nQuels probl√®mes puis-je rencontrer au fil des projets ?\nEst-il facile de partager un de mes projets ?"
  },
  {
    "objectID": "slides/complete.html#enjeux-4",
    "href": "slides/complete.html#enjeux-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nVersion de R fixe, celle de l‚Äôinstallation syst√®me\nConflits de version : diff√©rents projets peuvent requ√©rir diff√©rentes versions d‚Äôun m√™me package.\nReproductibilit√© limit√©e : difficile de dire quel projet n√©cessite quel package.\nPortabilit√© limit√©e : difficile de pr√©ciser dans un fichier les d√©pendances sp√©cifiques √† un projet."
  },
  {
    "objectID": "slides/complete.html#des-environnements-reproductibles-avec-renv",
    "href": "slides/complete.html#des-environnements-reproductibles-avec-renv",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Des environnements reproductibles avec renv",
    "text": "Des environnements reproductibles avec renv\n\nrenv permet de cr√©er des environnements reproductibles\nIsolation : chaque projet dispose de sa propre librairie de packages\nReproductibilit√© : renv enregistre les versions exactes des packages n√©cessaires au projet\nPortabilit√©: un tiers peut ex√©cuter le projet avec les m√™mes sp√©cifications"
  },
  {
    "objectID": "slides/complete.html#utilisation-de-renv",
    "href": "slides/complete.html#utilisation-de-renv",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Utilisation de renv",
    "text": "Utilisation de renv\n\nInitialisation (init) de l‚Äôenvironnement local du projet\nD√©veloppement du projet\nEnregistrement (snapshot) des versions des packages install√©s\nRestauration (restore) d‚Äôun environnement"
  },
  {
    "objectID": "slides/complete.html#initialisation-de-lenvironnement",
    "href": "slides/complete.html#initialisation-de-lenvironnement",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Initialisation de l‚Äôenvironnement",
    "text": "1Ô∏è‚É£ Initialisation de l‚Äôenvironnement\n\nrenv::init() dans un projet RStudio cr√©e :\n\nUn dossier renv et le fichier .Rprofile : activation automatique de l‚Äôenvironnement\nLe fichier renv.lock : versions des packages install√©s"
  },
  {
    "objectID": "slides/complete.html#d√©veloppement-du-projet",
    "href": "slides/complete.html#d√©veloppement-du-projet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ D√©veloppement du projet",
    "text": "2Ô∏è‚É£ D√©veloppement du projet\n\nUne fois l‚Äôenvironnement initialis√©, on d√©veloppe le projet de mani√®re habituelle :\n\nInstallations/suppressions/mises √† jour de packages\nEcriture de scripts\n\nrenv::status() : indique les packages install√©s/supprim√©s par rapport au fichier renv.lock"
  },
  {
    "objectID": "slides/complete.html#enregistrement-de-lenvironnement",
    "href": "slides/complete.html#enregistrement-de-lenvironnement",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Enregistrement de l‚Äôenvironnement",
    "text": "3Ô∏è‚É£ Enregistrement de l‚Äôenvironnement\n\nrenv::snapshot() : enregistre les versions des packages install√©s dans le fichier renv.lock\nNe pas oublier de committer le fichier renv.lock!"
  },
  {
    "objectID": "slides/complete.html#restauration-de-lenvironnement",
    "href": "slides/complete.html#restauration-de-lenvironnement",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Restauration de l‚Äôenvironnement",
    "text": "4Ô∏è‚É£ Restauration de l‚Äôenvironnement\n\nrenv::restore() : installe/d√©sinstalle les packages n√©cessaires pour arriver √† l‚Äô√©tat sp√©cifi√© dans le fichier renv.lock\nPortabilit√© : un tiers peut recr√©er un environnement avec les m√™mes sp√©cifications"
  },
  {
    "objectID": "slides/complete.html#application-4-2",
    "href": "slides/complete.html#application-4-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 4",
    "text": "Application 4\n\n insee\n\n\n\n\n\n\nPartie 1 : prise en main de la librairie renv\n\n\n\nInstaller le package renv\nTaper dans la console renv::init(), lire le message et accepter.\nObserver les nouveaux fichiers et dossiers qui sont apparus dans le projet.\nTaper library(sf) dans la console R et observer la r√©ponse de R. Comprenez-vous pourquoi ?\nDans la partie sur les statistiques descriptives, ajouter ce code qui produit une carte\n\nS‚Äôil manque un package pour la faire, l‚Äôinstaller\n\n\n\n\nNouvelle statistique descriptive √† ajouter\n\n# PART DES SENIORS DANS LA POPULATION ---------------------------\n\n# France geojson\ndepartements &lt;- sf::st_read(\n  \"https://minio.lab.sspcloud.fr/projet-formation/bonnes-pratiques/data/france.geojson\"\n)\n\n# PART DES SENIORS FRANCE ENTIERE =====================================\n\npart_seniors &lt;- open_dataset(\n  \"./data/RPindividus\",\n  hive_style = TRUE\n) %&gt;%\n  mutate(plus_60 = AGED &gt; 60) %&gt;%\n  group_by(DEPT, plus_60) %&gt;%\n  summarise(\n    population_totale = sum(IPONDI)\n  ) %&gt;%\n  group_by(DEPT) %&gt;%\n  mutate(\n    population_60_ans = population_totale,\n    pourcentage_60_plus = population_totale/sum(population_totale),\n    population_totale = sum(population_totale)\n  ) %&gt;%\n  filter(plus_60 == TRUE) %&gt;%\n  select(DEPT, population_totale, population_60_ans, pourcentage_60_plus) %&gt;%\n  collect()\n\n\n# CARTE =====================================\n\ndepartements_60_plus_sf &lt;- departements %&gt;%\n  inner_join(\n    part_seniors,\n    by = c(\"INSEE_DEP\" = \"DEPT\")\n  )\n\n\nggplot(departements_60_plus_sf) +\n  geom_sf(aes(fill = pourcentage_60_plus)) + \n  scale_fill_fermenter(n.breaks = 5, palette = \"PuBuGn\", direction = 1) + \n  theme_void() + \n  labs(\n    title = \"Part des personnes de plus de 60 ans par d√©partement\",\n    caption = \"Source: Insee, Fichiers d√©tails du recensement de la population\",\n    fill = \"Part (%)\"\n  )\n\n\n\n\n\n\n\n\n\n\n\nPartie 1 : prise en main de la librairie renv\n\n\n\nInstaller le package renv\nTaper dans la console renv::init(), lire le message et accepter.\nObserver les nouveaux fichiers et dossiers qui sont apparus dans le projet.\nTaper library(sf) dans la console R et observer la r√©ponse de R. Comprenez-vous pourquoi ?\nDans la partie sur les statistiques descriptives, ajouter ce code qui produit une carte\n\nS‚Äôil manque un package pour la faire, l‚Äôinstaller\n\n\n\n\nNouvelle statistique descriptive √† ajouter\n\n# PART DES SENIORS DANS LA POPULATION ---------------------------\n\n# France geojson\ndepartements &lt;- aws.s3::s3read_using(\n  FUN = sf::st_read, \n  object = \"france.geojson\", \n  bucket = \"public/ssplab-formation\",\n  opts = list(\"region\" = \"\")\n  )\n\n# PART DES SENIORS FRANCE ENTIERE =====================================\n\npart_seniors &lt;- open_dataset(\n  \"./data/RPindividus\",\n  hive_style = TRUE\n) %&gt;%\n  mutate(plus_60 = AGED &gt; 60) %&gt;%\n  group_by(DEPT, plus_60) %&gt;%\n  summarise(\n    population_totale = sum(IPONDI)\n  ) %&gt;%\n  group_by(DEPT) %&gt;%\n  mutate(\n    population_60_ans = population_totale,\n    pourcentage_60_plus = population_totale/sum(population_totale),\n    population_totale = sum(population_totale)\n  ) %&gt;%\n  filter(plus_60 == TRUE) %&gt;%\n  select(DEPT, population_totale, population_60_ans, pourcentage_60_plus) %&gt;%\n  collect()\n\n\n# CARTE =====================================\n\ndepartements_60_plus_sf &lt;- departements %&gt;%\n  inner_join(\n    part_seniors,\n    by = c(\"INSEE_DEP\" = \"DEPT\")\n  )\n\n\nggplot(departements_60_plus_sf) +\n  geom_sf(aes(fill = pourcentage_60_plus)) + \n  scale_fill_fermenter(n.breaks = 5, palette = \"PuBuGn\", direction = 1) + \n  theme_void() + \n  labs(\n    title = \"Part des personnes de plus de 60 ans par d√©partement\",\n    caption = \"Source: Insee, Fichiers d√©tails du recensement de la population\",\n    fill = \"Part (%)\"\n  )"
  },
  {
    "objectID": "slides/complete.html#application-4-3",
    "href": "slides/complete.html#application-4-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 4",
    "text": "Application 4\n\n\n\nPartie 2 : Faire un snapshot de l‚Äôenvironnement\n\n\n\n\nDans la console, faire renv::status() et observer le message\nEffectuer renv::snapshot() pour int√©grer les nouveaux packages au lockfile\nFaire un commit / push des fichiers script.R, .Rprofile, renv.lock et du dossier renv/"
  },
  {
    "objectID": "slides/complete.html#application-4-4",
    "href": "slides/complete.html#application-4-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 4",
    "text": "Application 4\n\n\n\nPartie 3 : Test de portabilit√©\n\n\n\n\nOuvrir un nouveau projet RStudio et cloner √† nouveau votre d√©p√¥t (sous un nom diff√©rent)\nEx√©cuter renv::restore() pour installer les packages n√©cessaires √† l‚Äôex√©cution du projet\nV√©rifier que le script.R s‚Äôex√©cute correctement dans ce nouveau projet"
  },
  {
    "objectID": "slides/complete.html#checkpoint-6",
    "href": "slides/complete.html#checkpoint-6",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Checkpoint",
    "text": "Checkpoint\n\n insee\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script main.R\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script main.R"
  },
  {
    "objectID": "slides/complete.html#vers-une-reproductibilit√©-optimale",
    "href": "slides/complete.html#vers-une-reproductibilit√©-optimale",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Vers une reproductibilit√© optimale",
    "text": "Vers une reproductibilit√© optimale\n\nLimites des environnements virtuels :\n\nLes librairies syst√®me ne sont pas g√©r√©es\nLourdeur de la phase d‚Äôinstallation √† chaque changement d‚Äôenvironnement\nPeu adapt√©s √† un environnement de production\n\nLa conteneurisation (ex : Docker) apporte la solution\nIntuition : au lieu de distribuer la recette pour recr√©er l‚Äôenvironnement, distribuer directement une ‚Äúmachine‚Äù qui contient tout l‚Äôenvironnement n√©cessaire au projet"
  },
  {
    "objectID": "slides/complete.html#ressources-suppl√©mentaires-3",
    "href": "slides/complete.html#ressources-suppl√©mentaires-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\nLa documentation officielle de renv\nLa fiche utilitR sur la gestion des d√©pendances"
  },
  {
    "objectID": "slides/complete.html#de-quoi-parle-t-on",
    "href": "slides/complete.html#de-quoi-parle-t-on",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "De quoi parle-t-on ?",
    "text": "De quoi parle-t-on ?\n\nProduction statistique : chiffres, donn√©es, analyses produits par l‚ÄôInsee / les SSM\nProduction informatique : processus maintenus par la DSI sur des infrastructures avec ‚Äúgarantie de service‚Äù\nSelf de production : processus maintenus par le m√©tier sur une infrastructure ‚Äúself‚Äù\nCode de production : code respectant des standards de qualit√© qui le rendent efficace et maintenable"
  },
  {
    "objectID": "slides/complete.html#r-un-langage-de-production",
    "href": "slides/complete.html#r-un-langage-de-production",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "R : un langage de production ?",
    "text": "R : un langage de production ?\n\nR a √©merg√© dans la communaut√© statistique\n\nOutils d‚Äôanalyse interactive tr√®s d√©velopp√©s\nOutils de d√©veloppement limit√©s\n\nL‚Äô√©co-syst√®me tidyverse s‚Äôoriente vers des outils production-ready"
  },
  {
    "objectID": "slides/complete.html#les-trois-commandements-dhadley",
    "href": "slides/complete.html#les-trois-commandements-dhadley",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Les trois commandements d‚ÄôHadley",
    "text": "Les trois commandements d‚ÄôHadley\n\nLe code de production a trois caract√©ristiques\n\n‚ÄúNot just me‚Äù\n‚ÄúNot just once‚Äù\n‚ÄúNot just my computer‚Äù"
  },
  {
    "objectID": "slides/complete.html#les-trois-commandements-dhadley-1",
    "href": "slides/complete.html#les-trois-commandements-dhadley-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Les trois commandements d‚ÄôHadley",
    "text": "Les trois commandements d‚ÄôHadley\n\n\nLe code de production a trois caract√©ristiques\n\n‚ÄúNot just me‚Äù\n‚ÄúNot just once‚Äù\n‚ÄúNot just my computer‚Äù"
  },
  {
    "objectID": "slides/complete.html#not-just-me",
    "href": "slides/complete.html#not-just-me",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just me‚Äù",
    "text": "‚ÄúNot just me‚Äù\n\nPenser son projet en termes de maintenabilit√©\nAdopter les standards communautaires\n\nGit pour la tra√ßabilit√© des choix\nQualit√© du code (structure, documentation)\nChoix des packages (voir fiche UtilitR)\n\n\n\n\n\n‚ÄúLe simple fait qu‚Äôun package fasse (ou semble faire) ce que vous voulez n‚Äôest pas une raison suffisante de l‚Äôutiliser, surtout si votre programme doit rester fonctionnel pendant une longue p√©riode. D√©terminer si on peut utiliser un package revient √† faire un arbitrage entre avantages et inconv√©nients, et √† √©valuer le risque d‚Äôinstabilit√© d‚Äôun package.‚Äù\nUtilitR"
  },
  {
    "objectID": "slides/complete.html#not-just-me-1",
    "href": "slides/complete.html#not-just-me-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just me‚Äù",
    "text": "‚ÄúNot just me‚Äù\n\nOrganiser le travail collaboratif\n\nS‚Äôaccorder sur une organisation\nDes outils facilitant via l‚Äô√©cosyst√®me Git\n\nTraiter le code comme un √©l√©ment m√©thodologique\n\nRevue de code\n\n\n\n\n\n‚ÄúLes d√©veloppeurs, quel que soit leur r√¥le, y voient de multiples avantages et un contexte dans lequel ils peuvent se former mutuellement, maintenir l‚Äôint√©grit√© des bases de code de leurs √©quipes et cr√©er, √©tablir et faire √©voluer des normes qui garantissent la lisibilit√© et la coh√©rence du code.‚Äù\nSadowski et al., Modern code review: a case study at google (2018)"
  },
  {
    "objectID": "slides/complete.html#not-just-me-2",
    "href": "slides/complete.html#not-just-me-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just me‚Äù",
    "text": "‚ÄúNot just me‚Äù\n\nPenser √† l‚Äôexp√©rience des utilisateurs finaux\nPour la mise √† disposition de donn√©es : Parquet\n\nInterop√©rable et m√©ta-donn√©es incluses\nPerformances en stockage et en lecture\n\nPour la documentation / publication : quarto\n\nInt√®gre code et texte pour la reproductibilit√©\nPublication multi-formats (pdf, odt, html)\n\nExemple ‚Äú2 en 1‚Äù : utiliser les donn√©es RP en Parquet"
  },
  {
    "objectID": "slides/complete.html#les-trois-commandements-dhadley-2",
    "href": "slides/complete.html#les-trois-commandements-dhadley-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Les trois commandements d‚ÄôHadley",
    "text": "Les trois commandements d‚ÄôHadley\n\n\nLe code de production a trois caract√©ristiques\n\n‚ÄúNot just me‚Äù\n‚ÄúNot just once‚Äù\n‚ÄúNot just my computer‚Äù"
  },
  {
    "objectID": "slides/complete.html#not-just-once",
    "href": "slides/complete.html#not-just-once",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just once‚Äù",
    "text": "‚ÄúNot just once‚Äù\n\nPenser son projet en termes de reproductibilit√©\nUne t√¢che de production\n\nEst r√©p√©t√©e dans le temps\nPeut changer d‚Äôenvironnement (dev, test, prod‚Ä¶)\n\nProbl√®me : le monde ‚Äúautour du code‚Äù √©volue\n\nSp√©cifier et contr√¥ler l‚Äôenvironnement\nAutomatiser ce qui peut l‚Äô√™tre"
  },
  {
    "objectID": "slides/complete.html#not-just-once-1",
    "href": "slides/complete.html#not-just-once-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just once‚Äù",
    "text": "‚ÄúNot just once‚Äù\n\nLes donn√©es changent\n\nFactoriser le code avec des fonctions\nMod√©liser sa cha√Æne sous forme de DAG\n\n\n\n\n\n\n\n\n\nOutil : {targets}"
  },
  {
    "objectID": "slides/complete.html#not-just-once-2",
    "href": "slides/complete.html#not-just-once-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just once‚Äù",
    "text": "‚ÄúNot just once‚Äù\n\nLe code / les donn√©es changent‚Ä¶ et cassent\nSp√©cifier les attendus\n\nTests unitaires : v√©rifie le bon comportement du code\nValidation de donn√©es : v√©rifie l‚Äôint√©grit√© et la qualit√© des donn√©es\n\nOutils : testthat et pointblank"
  },
  {
    "objectID": "slides/complete.html#not-just-once-3",
    "href": "slides/complete.html#not-just-once-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just once‚Äù",
    "text": "‚ÄúNot just once‚Äù\n\nLes d√©pendances changent (fonctionnalit√©s, bugs, failles de s√©curit√©‚Ä¶)\nArbitrage entre √©volutivit√© et stabilit√©\n\nL‚Äô√©volution des d√©pendances est inh√©rente √† la maintenance d‚Äôune cha√Æne de production\n\nOn limite les risques en sp√©cifiant l‚Äôenvironnement\n\nFixer les versions des packages utilis√©s : renv\nVersionner sa cha√Æne de production : tags Git"
  },
  {
    "objectID": "slides/complete.html#not-just-once-4",
    "href": "slides/complete.html#not-just-once-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just once‚Äù",
    "text": "‚ÄúNot just once‚Äù\n\nL‚Äôenvironnement change (OS, libs syst√®me, R‚Ä¶)\n\nDifficult√© principale du passage en production\n\nLa conteneurisation permet de fixer l‚Äôenvironnement\n\nFavorise la portabilit√©"
  },
  {
    "objectID": "slides/complete.html#not-just-once-5",
    "href": "slides/complete.html#not-just-once-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just once‚Äù",
    "text": "‚ÄúNot just once‚Äù\n\nConcevoir sa cha√Æne comme un pipeline de donn√©es\n\nReproductibilit√© : √©tapes int√©gr√©es ‚Äúde bout en bout‚Äù\nStabilit√© : contr√¥le des √©volutions\nPortabilit√© : fluidifie le changement d‚Äôarchitecture\n\nAvantage suppl√©mentaire : automatisation\nOutil : int√©gration continue via GitHub / GitLab\n\nAccro√Æt encore les b√©n√©fices d‚Äôutiliser Git !"
  },
  {
    "objectID": "slides/complete.html#les-trois-commandements-dhadley-3",
    "href": "slides/complete.html#les-trois-commandements-dhadley-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Les trois commandements d‚ÄôHadley",
    "text": "Les trois commandements d‚ÄôHadley\n\n\nLe code de production a trois caract√©ristiques\n\n‚ÄúNot just me‚Äù\n‚ÄúNot just once‚Äù\n‚ÄúNot just my computer‚Äù"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer",
    "href": "slides/complete.html#not-just-my-computer",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\n\nEvolution continue vers des infrastructures de self ‚Äúproduction-ready‚Äù"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-1",
    "href": "slides/complete.html#not-just-my-computer-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\n\nOK, mais pourquoi ü§î ?\nPourquoi migrer vers des infrastructures centralis√©es ?\n\nCentralisation : permet le passage √† l‚Äô√©chelle\nS√©curit√© : √©vite la diss√©mination de donn√©es\n\nPourquoi migrer vers des infrastructures Kubernetes ?\n\nTout ce qu‚Äôon pouvait faire avant‚Ä¶ en mieux\nNouveaux usages : d√©ploiements (applications, API), calcul distribu√©, traitements ordonnanc√©s‚Ä¶\nAutonomie (environnement, stockage, etc.)"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-2",
    "href": "slides/complete.html#not-just-my-computer-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\nUn point de d√©part commun"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-3",
    "href": "slides/complete.html#not-just-my-computer-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\nUn point de d√©part commun \nUne structuration de projet plus viable"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-4",
    "href": "slides/complete.html#not-just-my-computer-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\nUn point de d√©part commun \nUne structuration de projet plus viable \nFacilit√©e par l‚Äô√©co-syst√®me cloud"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-5",
    "href": "slides/complete.html#not-just-my-computer-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\n\nQu‚Äôest-ce qui change ü§î ?\nTechniquement, tout‚Ä¶ ou presque !\n\nDu monde desktop au monde server\nDu monde Windows au monde Linux\n\nEn pratique, Onyxia facilite la transition"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-6",
    "href": "slides/complete.html#not-just-my-computer-6",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\n\nQu‚Äôest-ce qui change ü§î ?\nMonde conteneuris√© : les traitements sont √©ph√©m√®res\n\n‚ÄúCo√ªt‚Äù de l‚Äôautonomie et de la mutualisation\nMais source de reproductibilit√© !"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-7",
    "href": "slides/complete.html#not-just-my-computer-7",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\n\nQu‚Äôest-ce qui change ü§î ?\n\nEvolution du mode de stockage de donn√©es\n\nInfrastructures ‚Äúbureau virtuel‚Äù : lecteurs partag√©s\n\nLe ‚Äúbureau virtuel‚Äù simule le filesystem traditionnel\n\nInfrastructures cloud : stockage objet (S3 / MinIO)\n\nStockage tr√®s peu co√ªteux\nAutonomie : bucket personnel / de projet\nFonctionnement diff√©rent des filesystems"
  },
  {
    "objectID": "slides/complete.html#not-just-my-computer-8",
    "href": "slides/complete.html#not-just-my-computer-8",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ÄúNot just my computer‚Äù",
    "text": "‚ÄúNot just my computer‚Äù\n\nQu‚Äôest-ce qui change ü§î ?\nEvolution de la nature des traitements\n\nTraitements interactifs pour le d√©veloppement\nTraitements batch pour le d√©ploiement\n\nLe d√©bogage devient moins imm√©diat\n\nN√©cessit√© du logging : logger"
  },
  {
    "objectID": "slides/complete.html#d√©passer-le-mur-de-la-production",
    "href": "slides/complete.html#d√©passer-le-mur-de-la-production",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "D√©passer le ‚Äúmur de la production‚Äù",
    "text": "D√©passer le ‚Äúmur de la production‚Äù\n\nUne organisation limit√©e par l‚Äôh√©t√©rog√©n√©it√© des environnements"
  },
  {
    "objectID": "slides/complete.html#d√©passer-le-mur-de-la-production-1",
    "href": "slides/complete.html#d√©passer-le-mur-de-la-production-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "D√©passer le ‚Äúmur de la production‚Äù",
    "text": "D√©passer le ‚Äúmur de la production‚Äù\n\nL‚Äôopportunit√© d‚Äôorganisations plus continues"
  },
  {
    "objectID": "slides/complete.html#application-5-partie-1",
    "href": "slides/complete.html#application-5-partie-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 5: partie 1",
    "text": "Application 5: partie 1\n\n\n\n\nPartie 1 : transition vers le stockage S3\n\n\n\n\nEn d√©but de script, cr√©er les chemins o√π les donn√©es pourront √™tre trouv√©es (voir ci-dessous)\nCr√©er un connecteur Arrow entre votre session R et l‚Äôespace de stockage S3\n\nbucket &lt;- s3_bucket(bucket_formation, endpoint_override = Sys.getenv(\"AWS_S3_ENDPOINT\"))\nbucket_path &lt;- bucket$path(paste0(path_within_bucket, \"/RPindividus\"))\n\nDans main.R, modifier les codes utilisant open_dataset pour remplacer les chemins par la variable bucket_path.\n\ndf &lt;- open_dataset(\n  bucket_path,\n  hive_style = TRUE\n) %&gt;%\n  filter(REGION == 24) %&gt;%\n  select(any_of(columns_subset)) %&gt;%\n  collect()\n\nSi n√©cessaire, remplacer l‚Äôimport du geojson\n\ndepartements &lt;- aws.s3::s3read_using(\n  FUN = sf::st_read, \n  object = \"france.geojson\", \n  bucket = paste0(bucket_formation, \"/\", path_within_bucket),\n  opts = list(\"region\" = \"\")\n  )\n\n\n\nConnecteur pour la question 1\n\n\n insee\n\n\nbucket_formation &lt;- \"projet-formation\"\npath_within_bucket &lt;- \"/bonnes-pratiques/data\"\n\n\nbucket_formation &lt;- \"public\"\npath_within_bucket &lt;- \"/ssplab-formation\""
  },
  {
    "objectID": "slides/complete.html#application-5-partie-2",
    "href": "slides/complete.html#application-5-partie-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 5: partie 2",
    "text": "Application 5: partie 2\n\n\n\nPartie 2 : orchestrer sa cha√Æne de production\n\n\nAu fil des chapitres pr√©c√©dents, nous avons appliqu√© un ensemble de bonnes pratiques √† notre cha√Æne de production pour accro√Ætre sa qualit√© et sa maintenabilit√©. N√©anmoins, celle-ci est encore sous la forme d‚Äôun unique script.\nDe mani√®re g√©n√©rale, on a plut√¥t envie de mod√©liser les √©tapes d‚Äôune cha√Æne comme une s√©rie de fonctions, avec une fonction ‚Äúcheffe d‚Äôorchestre‚Äù qui appelle les autres dans le bon ordre.\n\n\nCr√©er les scripts suivants:\n\n\nR/functions_import.R (contenu)\nR/functions_stats_desc.R (contenu)\nR/functions_models.R (contenu)\n\n\nModifier main.R pour tenir compte de la modularisation (version  + sspcloud ou version  + LS3)\nPasser la souris sur une des nouvelles fonctions et faire F1\n\n\n\n\n\n\n\n\n\n\n\ntargets: un orchestrateur formel\n\n\nOn aurait pu √©galement utiliser un orchestrateur d√©di√© pour effectuer cette t√¢che, comme le package targets. Les plus curieux d‚Äôentre vous pourront aller voir le chapitre et les exercices qui lui √©taient auparavant d√©di√©s dans cette formation."
  },
  {
    "objectID": "slides/complete.html#application-5-partie-3",
    "href": "slides/complete.html#application-5-partie-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 5: partie 3",
    "text": "Application 5: partie 3\n\n\n\n\nPartie 3 : ajout de contr√¥les de qualit√© des donn√©es\n\n\nUn crit√®re de qualit√© majeur d‚Äôune cha√Æne de production est sa robustesse. Naturellement, les donn√©es en entr√©e de la cha√Æne peuvent √©voluer dans le temps. Afin de g√©rer au mieux les risques pos√©s par de telles √©volutions, on va ajouter des contr√¥les sur la qualit√© des donn√©es, en entr√©e et en sortie de la cha√Æne.\n\n\n\n\n\n\n\n\nPartie 4 : tests unitaires et versionnage de la cha√Æne\n\n\nNotre cha√Æne tourne √† pr√©sent de mani√®re robuste. Pour autant, ce n‚Äôest pas un objet fixe : on peut vouloir lui apporter des corrections ou des am√©liorations fonctionnelles. Et ces modifications peuvent, √† leur tour, provoquer des nouvelles erreurs. Pour g√©rer ces risques, on va : - versionner la cha√Æne, afin de certifier le code qui la fait tourner sans erreur √† un moment T - impl√©menter des tests unitaires, qui permettent de continuer √† modifier la cha√Æne sans risquer de r√©gressions\n\n\n\n\n\n\n\n\nPartie 5 : un rapport reproductible pour documenter sa cha√Æne de production\n\n\nUne bonne mani√®re de favoriser √† la fois la maintenabilit√© de sa cha√Æne et la r√©utilisationde ses produits est de documenter son fonctionnement. Le format quarto ‚Äî successeur de R Markdown ‚Äî permet de reproduire facilement des rapports reproductibles, qui int√®grent code et texte. En plus, ces rapports peuvent √™tre facilement publi√©s en diff√©rents formats, du plus interactif (html) aux plus classiques (pdf, odt, etc.).\n\n\n\n\n\n\n\n\nPartie 6 : automatiser la mise √† disposition\n\n\nOn dispose finalement d‚Äôune cha√Æne orchestr√©e, robuste et bien document√©e. Afin d‚Äôen faire une cha√Æne vraiment int√©gr√©e de bout en bout, on va automatiser les √©tapes, de sorte √† ce que les modifications apport√©es au projet se r√©p√©rcutent sur ses sorties. Pour cela, on va utiliser les outils de l‚Äôint√©gration continue propos√©s par GitHub / GitLab."
  },
  {
    "objectID": "slides/complete.html#ressources-suppl√©mentaires-4",
    "href": "slides/complete.html#ressources-suppl√©mentaires-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\nLa documentation utilitR\nCours Reproductibilit√© et bonnes pratiques pour les projets de data science de l‚ÄôENSAE\nUn cours complet (en anglais) sur la reproductibilit√© avec R\nConf√©rence ‚ÄúR in production‚Äù d‚ÄôHadley Wickham (en anglais)\nLe cours (en construction) ‚ÄúR in production‚Äù d‚ÄôHadley Wickham (en anglais)"
  },
  {
    "objectID": "slides/complete.html#conclusion-1",
    "href": "slides/complete.html#conclusion-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Conclusion",
    "text": "Conclusion\n\nDes standards communautaires qui favorisent la reproductibilit√© et la maintenabilit√©\nDe multiples outils pour simplifier leur mise en oeuvre\nUn co√ªt d‚Äôautant plus faible que l‚Äôon se place en amont\nLe mouvement de modernisation du self est l‚Äôoccasion d‚Äôune mont√©e en comp√©tence collective"
  },
  {
    "objectID": "slides/complete.html#ressources-communautaires",
    "href": "slides/complete.html#ressources-communautaires",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources communautaires",
    "text": "Ressources communautaires\n\nCanaux de discussion\n\nA l‚ÄôInsee\n\nPour toute question sur Git : Insee-Git-Gitlab\nPour toute question stat/self : Insee - Outils Stats v2\nPour toute question sp√©cifique √† AUS/LS3 : Insee-DSI-Plateformes-Internes-Datascience\n\nPlus largement sur R\n\nSur Tchap : Langage R (Tchap)\nSur Slack : r-grrr\n\n\nDocumentation\n\nService datascience Insee\nUtilitR\n\nFormation\n\nEspace formation du SSP Cloud"
  },
  {
    "objectID": "slides/light.html#introduction",
    "href": "slides/light.html#introduction",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Introduction",
    "text": "Introduction\n\n\nVersion courte de la formation aux bonnes pratiques avec R et Git (page d‚Äôaccueil)"
  },
  {
    "objectID": "slides/light.html#la-notion-de-bonnes-pratiques",
    "href": "slides/light.html#la-notion-de-bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "La notion de bonnes pratiques",
    "text": "La notion de bonnes pratiques\n\nOrigine : communaut√© des d√©veloppeurs logiciels\nConstats :\n\nle ‚Äúcode est plus souvent lu qu‚Äô√©crit‚Äù (Guido Van Rossum)\nla maintenance d‚Äôun code est tr√®s co√ªteuse\n\nCons√©quence : un ensemble de r√®gles informelles, conventionnellement accept√©es comme produisant des logiciels fiables, √©volutifs et maintenables"
  },
  {
    "objectID": "slides/light.html#pourquoi-sint√©resser-aux-bonnes-pratiques",
    "href": "slides/light.html#pourquoi-sint√©resser-aux-bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Pourquoi s‚Äôint√©resser aux bonnes pratiques ?",
    "text": "Pourquoi s‚Äôint√©resser aux bonnes pratiques ?\n\nL‚Äôactivit√© du statisticien / datascientist tend √† se rapprocher de celle du d√©veloppeur :\n\nprojets intenses en code\nprojets collaboratifs et de grande envergure\ncomplexification des donn√©es et donc des infrastructures\nd√©ploiement d‚Äôapplications pour valoriser les analyses"
  },
  {
    "objectID": "slides/light.html#bonnes-pratiques-et-reproductibilit√©",
    "href": "slides/light.html#bonnes-pratiques-et-reproductibilit√©",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques et reproductibilit√©",
    "text": "Bonnes pratiques et reproductibilit√©\n\n\n\n\n\nSource : Peng R., Reproducible Research in Computational Science, Science (2011)\n\nUne reproductibilit√© parfaite est co√ªteuse\nGit est un standard atteignable et efficient\n\n\n\n\n\n\n\n\nNote\n\n\nQuel socle de bonnes pratiques pour les projets statistiques en  ?"
  },
  {
    "objectID": "slides/light.html#horizon-de-cette-formation",
    "href": "slides/light.html#horizon-de-cette-formation",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Horizon de cette formation",
    "text": "Horizon de cette formation\nUn point de d√©part commun"
  },
  {
    "objectID": "slides/light.html#horizon-de-cette-formation-1",
    "href": "slides/light.html#horizon-de-cette-formation-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Horizon de cette formation",
    "text": "Horizon de cette formation\nUn point de d√©part commun \nUne structuration de projet plus viable"
  },
  {
    "objectID": "slides/light.html#plan-de-la-partie",
    "href": "slides/light.html#plan-de-la-partie",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Plan de la partie",
    "text": "Plan de la partie\n1Ô∏è‚É£ Le contr√¥le de version : pourquoi faire ?\n2Ô∏è‚É£ Le contr√¥le de version avec Git"
  },
  {
    "objectID": "slides/light.html#archiver-son-code-proprement",
    "href": "slides/light.html#archiver-son-code-proprement",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\npour en finir avec √ßa :"
  },
  {
    "objectID": "slides/light.html#archiver-son-code-proprement-1",
    "href": "slides/light.html#archiver-son-code-proprement-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nou √ßa :"
  },
  {
    "objectID": "slides/light.html#archiver-son-code-proprement-2",
    "href": "slides/light.html#archiver-son-code-proprement-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nou encore √ßa :\nprior &lt;- read_csv(prior_path)\nprior &lt;- prior %&gt;%\n    select(id, proba_inter, proba_build, proba_rfl) %&gt;%\n    separate(id, into = c('nidt', 'grid_id'), sep = \":\") %&gt;%\n    group_by(nidt) %&gt;%\n    mutate(\n        proba_build = proba_build/sum(proba_build),\n        proba_rfl = proba_rfl/sum(proba_rfl),\n        ) %&gt;%\n    unite(col = \"id\", nidt, grid_id, sep = \":\")\n\n# Test\n# prior_test &lt;- prior %&gt;%\n#    mutate(\n#        proba_inter = round(proba_inter, 4)\n#        proba_build = round(proba_build, 4)\n#        proba_rfl = round(proba_rfl, 4)\n#    )\n\nwrite_csv(prior_round, \"~/prior.csv\")"
  },
  {
    "objectID": "slides/light.html#archiver-son-code-proprement-3",
    "href": "slides/light.html#archiver-son-code-proprement-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nPour arriver √† √ßa :\n\n\n\n\n\nSource : ThinkR"
  },
  {
    "objectID": "slides/light.html#voyager-dans-le-temps-de-votre-projet",
    "href": "slides/light.html#voyager-dans-le-temps-de-votre-projet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Voyager dans le temps (de votre projet)",
    "text": "2Ô∏è‚É£ Voyager dans le temps (de votre projet)"
  },
  {
    "objectID": "slides/light.html#une-collaboration-simplifi√©e-et-efficace",
    "href": "slides/light.html#une-collaboration-simplifi√©e-et-efficace",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nUn mod√®le distribu√©\n\n\n\n\n\nSource : specbee.com"
  },
  {
    "objectID": "slides/light.html#une-collaboration-simplifi√©e-et-efficace-1",
    "href": "slides/light.html#une-collaboration-simplifi√©e-et-efficace-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nQui permet l‚Äôexp√©rimentation en toute s√©curit√©\n\nSource : lutece.paris.fr"
  },
  {
    "objectID": "slides/light.html#une-collaboration-simplifi√©e-et-efficace-2",
    "href": "slides/light.html#une-collaboration-simplifi√©e-et-efficace-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nQuel que soit l‚Äôenvironnement de travail"
  },
  {
    "objectID": "slides/light.html#une-collaboration-simplifi√©e-et-efficace-3",
    "href": "slides/light.html#une-collaboration-simplifi√©e-et-efficace-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace",
    "text": "3Ô∏è‚É£ Une collaboration simplifi√©e et efficace\nAvec des outils pour faciliter la collaboration"
  },
  {
    "objectID": "slides/light.html#partager-son-code-√†-un-public-large",
    "href": "slides/light.html#partager-son-code-√†-un-public-large",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Partager son code √† un public large",
    "text": "4Ô∏è‚É£ Partager son code √† un public large\nUne vitrine pour les projets et l‚Äôorganisation"
  },
  {
    "objectID": "slides/light.html#en-r√©sum√©",
    "href": "slides/light.html#en-r√©sum√©",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "En r√©sum√©",
    "text": "En r√©sum√©\n\nConstruire et naviguer √† travers l‚Äôhistorique de son projet\nLa collaboration rendue simple et efficace\nAm√©liorer la reproductibilit√© de ses projets\nAm√©liorer la visibilit√© de ses projets"
  },
  {
    "objectID": "slides/light.html#git-est-complexe",
    "href": "slides/light.html#git-est-complexe",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ö†Ô∏è Git est complexe",
    "text": "‚ö†Ô∏è Git est complexe\nL‚Äôutilisation de Git n√©cessite certaines notions pr√©alables:\n\nFonctionnement d‚Äôun filesystem\nConnaissance basique du terminal Linux\nPotentiellement, un grand nombre de commandes\n\n\n\n\n\nSource : iulianacosmina.com"
  },
  {
    "objectID": "slides/light.html#git-est-complexe-1",
    "href": "slides/light.html#git-est-complexe-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ö†Ô∏è Git est complexe",
    "text": "‚ö†Ô∏è Git est complexe\nMais\n\nL‚Äôusage quotidien n‚Äôimplique que quelques commandes\nLes messages de Git sont tr√®s informatifs\nEnorm√©ment de ressources disponibles sur internet\nDes interfaces visuelles (ex: RStudio, Sublime Merge, VS Code) qui facilitent l‚Äôapprentissage\nUn petit investissement individuel pour de gros gains collectifs"
  },
  {
    "objectID": "slides/light.html#concepts",
    "href": "slides/light.html#concepts",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nGit, GitHub, GitLab‚Ä¶ quelles diff√©rences ?\n\nGit est un logiciel ;\nUtilisation en ligne de commandes\nDiff√©rentes interfaces graphiques (RStudio, VS Code‚Ä¶)"
  },
  {
    "objectID": "slides/light.html#concepts-1",
    "href": "slides/light.html#concepts-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nGit, GitHub, GitLab‚Ä¶ quelles diff√©rences ?\n\nGitHub et GitLab sont des forges logicielles\nForge: espace d‚Äôarchivage de code\nDes fonctionalit√©s suppl√©mentaires : r√©seau social du code\n\n\n\n\n\n\n\nAstuce\n\n\n\nGitHub : utilisation pour les projets open-source\nGitLab : utilisation pour les projets internes"
  },
  {
    "objectID": "slides/light.html#concepts-2",
    "href": "slides/light.html#concepts-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nD√©p√¥t local / d√©p√¥t distant (remote)\n\n\n\n\n\n\nPar d√©faut, le d√©p√¥t distant porte l‚Äôalias origin"
  },
  {
    "objectID": "slides/light.html#concepts-3",
    "href": "slides/light.html#concepts-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nWorkflow local\n\n\n\n\n\nSource : Git Documentation"
  },
  {
    "objectID": "slides/light.html#concepts-4",
    "href": "slides/light.html#concepts-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nWorkflow complet\n\n\n\nSource : itnext.io"
  },
  {
    "objectID": "slides/light.html#commandes-essentielles",
    "href": "slides/light.html#commandes-essentielles",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Commandes essentielles",
    "text": "Commandes essentielles\n\n\n\n\nAction\nCommande\n\n\n\n\nCloner un projet\ngit clone [url-to-git-repo]\n\n\nAfficher les changements\ngit status\n\n\nRetrouver l‚ÄôURL du d√©p√¥t distant\ngit remote -v"
  },
  {
    "objectID": "slides/light.html#commandes-essentielles-1",
    "href": "slides/light.html#commandes-essentielles-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Commandes essentielles",
    "text": "Commandes essentielles\n\n\n\n\n\n\n\n\nAction\nCommande\n\n\n\n\nAjouter des changements √† l‚Äôindex de Git (stage fixes)\nUn seul fichier : git add &lt;file-name&gt;  Tous les fichiers d√©j√† index√©s : git add -u  Tous les fichiers ‚ö†Ô∏è : git add -A\n\n\n\n\n\n\n\n\n\n\nWarning\n\n\nLa m√©thode git add -A peut amener √† suivre les modifications de fichiers qui ne devraient pas l‚Äô√™tre (par exemple, des donn√©es).\nIl est recommand√© de bien r√©fl√©chir avant de l‚Äôutiliser (ou d‚Äôavoir un bon .gitignore)"
  },
  {
    "objectID": "slides/light.html#commandes-essentielles-2",
    "href": "slides/light.html#commandes-essentielles-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Commandes essentielles",
    "text": "Commandes essentielles\n\n\n\n\n\n\n\n\nAction\nCommande\n\n\n\n\nFaire un commit\ngit commit -m \"message\"\n\n\nPousser les changements locaux vers le d√©p√¥t distant (branche master)\ngit push origin master\n\n\nR√©cup√©rer les changements sur le d√©p√¥t distant (branche master)\ngit pull origin master"
  },
  {
    "objectID": "slides/light.html#modes-dauthentification",
    "href": "slides/light.html#modes-dauthentification",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Modes d‚Äôauthentification",
    "text": "Modes d‚Äôauthentification\n\n\n insee\n\n\n\n\nhttps\n\ngit clone https://github.com/username/projet.git\nsimple √† utiliser\nauthentification username + password (ou token) √† chaque push\n\nssh\n\ngit clone git@github.com:username/projet.git\n(plus) complexe √† initialiser\nauthentification automatique\n\n\n\n\n\n\n\nhttps\n\ngit clone https://gitlab.insee.fr/username_or_groupname/projet.git\nsimple √† utiliser\nauthentification username + password (ou token) √† chaque push\n\nssh\n\ngit clone git@gitlab.insee.fr:username_or_groupname/projet.git\n(plus) complexe √† initialiser\nauthentification automatique"
  },
  {
    "objectID": "slides/light.html#application-0",
    "href": "slides/light.html#application-0",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 0",
    "text": "Application 0\n\n insee\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCr√©er un compte GitHub\nCr√©er un nouveau d√©p√¥t priv√© sur GitHub en incluant un fichier README\nCr√©er un compte sur le SSP Cloud\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants GitHub √† une valeur suffisamment √©lev√©e\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio du Datalab):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nG√©n√©rer un token (jeton d‚Äôauthentification) sur GitHub\nStocker le token sur le SSP Cloud (ou un gestionnaire de mot de passe) :\n\nMon Compte -&gt; Git -&gt; Token d'acc√®s personnel pour Forge Git\n\nTerminer la proc√©dure de clonage en fournissant le nom d‚Äôutilisateur GitHub et le token\n\n\n\n\n\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCompte d√©j√† cr√©√© sur le gitlab interne\nCr√©er un nouveau d√©p√¥t priv√© sur gitlab.insee.fr\nCr√©er un compte sur LS3 via AUS.\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants Gitlab √† une valeur suffisamment √©lev√©e\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio de la plateforme LS3):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nG√©n√©rer un token (jeton d‚Äôauthentification) sur gitlab.insee.fr\nStocker le token sur LS3 (ou un gestionnaire de mot de passe) :\n\nMon Compte -&gt; Git -&gt; Token d'acc√®s personnel pour Forge Git\n\nTerminer la proc√©dure de clonage en fournissant le nom d‚Äôutilisateur (IDEP) et le token\n\n\n\n\n\n\n\n\n‚ùì Question : qu‚Äôest ce qui diff√©rencie le projet clon√© d‚Äôun projet quelconque ?"
  },
  {
    "objectID": "slides/light.html#application-1",
    "href": "slides/light.html#application-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPremiers commits\n\n\n\n\nCr√©er un dossier üìÅ scripts\nY cr√©er les fichiers script1.R et script2.R, chacun contenant quelques commandes R de votre choix\nAjouter ces fichiers √† la zone de staging de Git en les cochant dans l‚Äôinterface RStudio\nEffectuer un commit, auquel on donnera un message descriptif pertinent\nSupprimer le fichier script1.R et modifier le contenu du fichier script2.R\nAnalyser ce qui se passe lorsque l‚Äôon coche ces fichiers dans l‚Äôinterface RStudio\nEffectuer un nouveau commit pour ajouter ces modifications √† l‚Äôhistorique\nVisualiser l‚Äôhistorique du projet √† partir de l‚Äôinterface graphique de RStudio\n\n\n\n\n\n‚ùì Question : √† ce stade, le d√©p√¥t du projet sur GitHub / Gitlab (remote) a-t-il √©t√© modifi√© ?"
  },
  {
    "objectID": "slides/light.html#application-2",
    "href": "slides/light.html#application-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 2",
    "text": "Application 2\n\n\n\nInteractions avec le d√©p√¥t distant\n\n\n\n\nEffectuer un push pour int√©grer les changements locaux au projet distant\nParcourir l‚Äôhistorique du projet sur GitHub / Gitlab\n\nFaire appara√Ætre les diff√©rences entre deux versions cons√©cutives du projet\nAfficher une version pass√©e du projet"
  },
  {
    "objectID": "slides/light.html#bonnes-pratiques",
    "href": "slides/light.html#bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nQue versionne-t-on ?\n\nEssentiellement du code source\nPas d‚Äôoutputs (fichiers .html, .pdf, mod√®les‚Ä¶)\nPas de donn√©es, d‚Äôinformations locales ou sensibles\n\n\n\n\n\n\n\n\nNote\n\n\nPour d√©finir des r√®gles qui √©vitent de committer tel ou tel fichier, on utilise un fichier nomm√© .gitignore.\nSi on m√©lange du code et des √©l√©ments annexes (output, donn√©es‚Ä¶) dans un m√™me dossier, il faut consacrer du temps √† ce fichier.\nDes mod√®les de .gitignore existent sur internet, par exemple celui-ci pour les projets .\nN‚Äôh√©sitez pas √† y ajouter des r√®gles conservatrices (par exemple *.csv), comme cela est expliqu√© dans la documentation utilitR."
  },
  {
    "objectID": "slides/light.html#bonnes-pratiques-1",
    "href": "slides/light.html#bonnes-pratiques-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nFormat des commits\n\n\n\n\n\n\n\nFr√©quence\n\nAussi souvent que possible\nLe lot de modifications doit ‚Äúavoir du sens‚Äù\n\nMessages\n\nCourts et informatifs (comme un titre de mail)\nD√©crire le pourquoi plut√¥t que le comment dans le texte"
  },
  {
    "objectID": "slides/light.html#application-3",
    "href": "slides/light.html#application-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\nLe fichier .gitignore\n\n\n\nL‚Äôobjectif de cette application est de cr√©er le fichier .gitignore, qui permet de sp√©cifier l‚Äôensemble des fichiers et/ou dossiers que l‚Äôon souhaite exclure de l‚Äôindexation faite par Git. Il doit se situer √† la racine du projet.\n\nCr√©er un fichier texte nomm√© .gitignore √† la racine du projet (attention √† ne pas ajouter d‚Äôextension au fichier, type .txt)\nCr√©er un dossier data √† la racine du projet et cr√©er √† l‚Äôint√©rieur de celui-ci un fichier data/raw.csv avec une ligne de donn√©es quelconque\nAjouter une premi√®re r√®gle au fichier .gitignore qui exclue le dossier data/, et v√©rifier que la r√®gle fonctionne\nAjouter une seconde r√®gle excluant tous les fichiers de type *.pdf et *.html, et v√©rifier que la r√®gle fonctionne\n\n\n\n\n\n‚ùì Question : que se passe-t-il lorsque l‚Äôon ajoute au .gitignore des fichiers qui ont d√©j√† √©t√© commit sur le projet Git ?\n\n\n\n\nDes fichiers .gitignore standards\n\n\nDans cette application, nous avons g√©n√©r√© le fichier .gitignore manuellement. En pratique, il existe des .gitignore standards adapt√©s pour chaque langage de programmation, qui impl√©mentent d√©j√† de nombreuses r√®gles pertinentes. Le mieux est donc de partir du .gitignore R pour tout nouveau projet R, et de rajouter les r√®gles sp√©cifiques que l‚Äôon souhaite appliquer au projet."
  },
  {
    "objectID": "slides/light.html#ressources-suppl√©mentaires",
    "href": "slides/light.html#ressources-suppl√©mentaires",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\nLa documentation utilitR propose plusieurs chapitres sur Git\nCours Reproductibilit√© et bonnes pratiques pour les projets de data science de l‚ÄôENSAE\nLa Bible de l‚Äôusage de Git"
  },
  {
    "objectID": "slides/light.html#plan-de-la-partie-1",
    "href": "slides/light.html#plan-de-la-partie-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Plan de la partie",
    "text": "Plan de la partie\n1Ô∏è‚É£ Qualit√© du code\n2Ô∏è‚É£ Structure des projets\n3Ô∏è‚É£ Formats de donn√©es"
  },
  {
    "objectID": "slides/light.html#application-0-1",
    "href": "slides/light.html#application-0-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 0",
    "text": "Application 0\n\n insee\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCr√©er un d√©p√¥t sur Github  en incluant un fichier README et un .gitignore (chercher le mod√®le R dans les suggestions)\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants GitHub √† une valeur suffisamment √©lev√©e (conseil: 36000)\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio du Datalab):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nCr√©er un script get_data.R en copiant le contenu de ce fichier, puis l‚Äôex√©cuter\nCr√©er le script script.R dans votre d√©p√¥t en copiant le contenu de ce fichier. Ne l‚Äôex√©cutez pas, c‚Äôest l‚Äôobjet de l‚Äôexercice suivant.\nAjouter la r√®gle ‚ÄúRPindividus*‚Äù au fichier .gitignore. Que signifie-t-elle ?\nCommit/push les changements (tous les fichiers, y compris ceux que Git a ajout√©)\n\n\n\n\n\n\n\n\n\n\nPr√©paration de l‚Äôenvironnement de travail\n\n\n\n\nCr√©er un nouveau d√©p√¥t public sur GitLab\nLancer un service RStudio. Dans l‚Äôonglet de configuration Git du service, fixer la dur√©e du Cache pour le stockage des identifiants GitLab √† une valeur suffisamment √©lev√©e\nCloner le d√©p√¥t distant sur votre environnement local (ici, le RStudio de LS3):\n\nFile ‚Üí New project ‚Üí Version Control ‚Üí Git\n\nCr√©er un script get_data.R en copiant le contenu de ce fichier, puis l‚Äôex√©cuter\nCr√©er le script script.R dans votre d√©p√¥t en copiant le contenu de ce fichier\nAjouter la r√®gle ‚Äúindividu_reg.*‚Äù au fichier .gitignore. Que signifie-t-elle ?\nCommit/push les changements"
  },
  {
    "objectID": "slides/light.html#enjeux",
    "href": "slides/light.html#enjeux",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nD‚Äôune vision utilitariste du code √† une vision du code comme outil de communication\nFavoriser la lisibilit√© et la maintenabilit√©\nFaciliter la r√©utilisation\nAssurer la transparence m√©thodologique"
  },
  {
    "objectID": "slides/light.html#principes-g√©n√©raux",
    "href": "slides/light.html#principes-g√©n√©raux",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Principes g√©n√©raux",
    "text": "Principes g√©n√©raux\n1Ô∏è‚É£ Adopter les standards communautaires\n2Ô∏è‚É£ Eviter la duplication de code\n3Ô∏è‚É£ (Auto)-documenter son code\n4Ô∏è‚É£ Isoler la configuration du code"
  },
  {
    "objectID": "slides/light.html#adopter-les-standards-communautaires",
    "href": "slides/light.html#adopter-les-standards-communautaires",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Adopter les standards communautaires",
    "text": "1Ô∏è‚É£ Adopter les standards communautaires\n\n‚ÄúGood coding style is like correct punctuation: you can manage without it, butitsuremakesthingseasiertoread‚Äù\nTidyverse Style Guide\n\n\nRespecter les conventions du langage dans lequel il est r√©dig√©\nIl existe un guide de r√©f√©rence pour bien coder en R : le Tidyverse style guide."
  },
  {
    "objectID": "slides/light.html#adopter-les-standards-communautaires-1",
    "href": "slides/light.html#adopter-les-standards-communautaires-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Adopter les standards communautaires",
    "text": "1Ô∏è‚É£ Adopter les standards communautaires\nDeux outils pratiques aident √† respecter les standards :\n\nlinter : programme qui v√©rifie que le code est formellement conforme √† un certain guidestyle\n\nsignale probl√®mes formels, sans corriger\n\nformatter : programme qui reformate un code pour le rendre conforme √† un certain guidestyle\n\nmodifie directement le code\n\n\n\n\n\n\n\n\n\nAstuce\n\n\n\n\nExemples d‚Äôerreurs rep√©r√©es par un linter :\n\nlignes de code trop longues ou mal indent√©es, parenth√®ses non √©quilibr√©es, noms de fonctions mal construits‚Ä¶\n\nExemples d‚Äôerreurs non rep√©r√©es par un linter :\n\nfonctions mal utilis√©es, arguments mal sp√©cifi√©s, structure du code incoh√©rente, code insuffisamment document√©‚Ä¶"
  },
  {
    "objectID": "slides/light.html#adopter-les-standards-communautaires-2",
    "href": "slides/light.html#adopter-les-standards-communautaires-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Adopter les standards communautaires",
    "text": "1Ô∏è‚É£ Adopter les standards communautaires\n\nDans le cas de  :\n\nle linter √† utiliser est le package lintr\nle formatter √† utiliser est le package styler.\n\nExiste √©galement le package formatR."
  },
  {
    "objectID": "slides/light.html#utiliser-des-fonctions",
    "href": "slides/light.html#utiliser-des-fonctions",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Utiliser des fonctions",
    "text": "2Ô∏è‚É£ Utiliser des fonctions\n\n\n\n\n\n\nR√®gle d‚Äôor\n\n\nIl faut utiliser une fonction d√®s qu‚Äôon utilise une m√™me portion de code plus de deux fois (don‚Äôt repeat yourself (DRY))\n\n\n\n\nLimite les risques d‚Äôerreurs li√©s aux copier/coller\nRend le code plus lisible et plus compact\nUn seul endroit du code √† modifier lorsqu‚Äôon souhaite modifier le traitement\nFacilite la r√©utilisation et la documentation du code !\n\n\n\n\n\n\n\n\nR√®gles pour √©crire des fonctions pertinentes\n\n\n\n\nUne t√¢che = une fonction\nUne t√¢che complexe = un encha√Ænement de fonctions r√©alisant chacune une t√¢che simple\nLimiter l‚Äôutilisation de variables globales."
  },
  {
    "objectID": "slides/light.html#documenter-son-code",
    "href": "slides/light.html#documenter-son-code",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Documenter son code",
    "text": "3Ô∏è‚É£ Documenter son code\n\nGrands principes :\n\nDocumenter le pourquoi plut√¥t que le comment\nPrivil√©gier l‚Äôauto-documentation\n\n\n\n\n\n\n\n\n\nComment bien documenter un script ?\n\n\n\n\nMinimum üö¶ : commentaire au d√©but du script pour d√©crire ce qu‚Äôil fait\nBien üëç : commenter les parties ‚Äúd√©licates‚Äù du code\nId√©al üí™ : documenter ses fonctions avec la syntaxe roxygen2."
  },
  {
    "objectID": "slides/light.html#documenter-son-code-1",
    "href": "slides/light.html#documenter-son-code-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Documenter son code",
    "text": "3Ô∏è‚É£ Documenter son code\n\n\n\n\n\n\nL‚Äôauto-documentation en pratique\n\n\nüëé La documentation pallie des mauvais nommages\n# Utilise string si x est non manquant et non vide\nif (!is.na(x) && nzchar(x)) {\n  use_string(x)\n}\nüëç Les nommages suffisent √† comprendre le code\nx_is_not_empty_string &lt;- (!is.na(x) && nzchar(x))\nif (x_is_not_empty_string) {\n  use_string(x)\n}"
  },
  {
    "objectID": "slides/light.html#isoler-la-configuration-du-code",
    "href": "slides/light.html#isoler-la-configuration-du-code",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Isoler la configuration du code",
    "text": "4Ô∏è‚É£ Isoler la configuration du code\n\nRappel : on vise une structure modulaire\n\n\n\n\nEn pratique : isoler les packages et les secrets"
  },
  {
    "objectID": "slides/light.html#gestion-des-packages",
    "href": "slides/light.html#gestion-des-packages",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Gestion des packages",
    "text": "4Ô∏è‚É£ Gestion des packages\n\nExternaliser l‚Äôinstallation des packages n√©cessaires\n\nLe code ne doit pas modifier l‚Äôenvironnement\nO√π ? Dans le README ou des fichiers sp√©cialis√©s (DESCRIPTION ou renv.lock)\n\nExpliciter l‚Äôappel des packages avec la syntaxe package::fonction()\n\nFavorise la lisibilit√© du code\nLimite les risques de fonctions ‚Äúmasqu√©es‚Äù\n\n\n\n\n\n\n\n\n\nExemple\n\n\n\n\npackage1 et package2 contiennent chacun une fonction appel√©e super_fonction.\nSi package2 est charg√© apr√®s package1, alors la fonction de package1 est automatiquement masqu√©e et super_fonction d√©signe par d√©faut la fonction de package2.\nMieux vaut noter package1::superFonction et package2::superFonction"
  },
  {
    "objectID": "slides/light.html#gestion-des-secrets",
    "href": "slides/light.html#gestion-des-secrets",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Gestion des secrets",
    "text": "4Ô∏è‚É£ Gestion des secrets\n\nLes secrets (mots de passe, tokens, etc.) sont des donn√©es sensibles\nQuelques principes de s√©curit√© essentiels\n\nUtiliser des tokens plut√¥t que des mots de passe\nUtiliser des comptes de service (quand c‚Äôest possible)\nJamais de secrets en clair dans le code\n\nEn pratique, deux recommendations selon l‚Äôusage\n\nDemander interactivement le secret √† l‚Äôutilisateur\nSp√©cifier des variables d‚Äôenvironnement via le fichier .Renviron (‚ö†Ô∏è √† ajouter au .gitignore)"
  },
  {
    "objectID": "slides/light.html#ressources-suppl√©mentaires-1",
    "href": "slides/light.html#ressources-suppl√©mentaires-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\n\nUne pr√©sentation de Ma√´lle Salmon sur le ¬´ code beau ¬ª.\nUne pr√©sentation tr√®s compl√®te sur le partage de code et de donn√©es avec R\nUne documentation (en anglais) sur la gestion des secrets (tokens, mots de passe, etc.)"
  },
  {
    "objectID": "slides/light.html#application-1-1",
    "href": "slides/light.html#application-1-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 1 : v√©rification du bon fonctionnement du code\n\n\nUn code reproductible est avant toute chose un code fonctionnel !\n\nRep√©rez les erreurs qui emp√™chent le script script.R de s‚Äôex√©cuter correctement, et les corriger.\nRed√©marrer votre session avec Session &gt; New Session (ou Ctrl+Maj+F10)\n\n\n\n\n\n\n\n\n\n\nLes pi√®ges que cet exercice vous montre\n\n\n\n\nLes fonctions utilis√©es sans import des packages\nLes chemins et le working directory\nL‚Äôordre des imports\nLes mauvaises pratiques de gestion de l‚Äôenvironnement (les bonnes pratiques arrivent dans les prochains exercices !)"
  },
  {
    "objectID": "slides/light.html#application-1-2",
    "href": "slides/light.html#application-1-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 2 : premiers standards de qualit√©\n\n\n\n\nInstaller les packages R lintr et styler1.\nD√©finir le linter √† utiliser comme √©tant de type tidyverse avec lintr::use_lintr(type = \"tidyverse\")\nDiagnostiquer le script script.R avec lintr::lint(\"script.R\").\n\nComprenez-vous la nature des probl√®mes d√©tect√©s par le linter?\n\nAppliquer le formatter au script.R avec styler::style_file(\"script.R\").\nRefaire tourner le linter. Il reste encore un certain nombre d‚Äôerreurs de formattage, car styler est un formatter peu intrusif.\nRegarder les probl√®mes restants rep√©r√©s par le linter, et en corriger quelques uns (un pour chaque type de probl√®me).\n\n\n\n\n\nLes install.packages sont √† faire en console et ne doivent pas √™tre mis dans le script (justification dans la prochaine partie de cet exercice)."
  },
  {
    "objectID": "slides/light.html#application-1-3",
    "href": "slides/light.html#application-1-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 3 : une meilleure gestion des packages utilis√©s\n\n\n\n\nLimiter les ambiguit√©s sur les packages en utilisant la syntaxe package::fonction pour les packages rarement utilis√©s dans le script.\nL‚Äôinstallation des packages dans un script n‚Äôest pas une bonne pratique. Supprimer les instructions correspondantes.\nImporter le tidyverse au complet est rarement utile. N‚Äôimporter √† la place que les packages effectivement utilis√©s dans le script.\n\n\n\nA propos du rm(list = ls()) (le supprimer !)\n\nCette commande est une mauvaise pratique.\nOn la retrouve encore dans trop de scripts car elle est utilis√©e pour de mauvaises raisons. Elle ne remets pas √† 0 votre environnement: elle supprime juste les donn√©es de celui-ci, sans toucher au reste (packages import√©s, etc.).\nIl vaut mieux g√©rer cela en changeant les options de  puis red√©marrer la session  (CTRL+SHIFT+F10)"
  },
  {
    "objectID": "slides/light.html#application-1-4",
    "href": "slides/light.html#application-1-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 4 : (auto-)documentation du code\n\n\n\nL‚Äôobjectif de cet exercice est de remettre de l‚Äôordre dans le script, cela le rendra bien plus lisible.\n\nD√©placer les library pour les mettre tous ensemble au d√©but du script.\nLe script n‚Äôest pas construit dans un ordre logique. D√©placer les parties pour adopter une structure plus lisible :\n\nGestion de l‚Äôenvironnement -&gt; D√©finition de fonctions -&gt; Import des donn√©es -&gt; Retraitement des donn√©es -&gt; Statistiques descriptives -&gt; Graphiques -&gt; Mod√©lisation\n\nDonner des titres aux parties/sous-parties en utilisant les standards de documentation reconnus par RStudio :\n\n# TITRE NIVEAU 1 ------------ et ## TITRE NIVEAU 2 ==========\n\n\nAu passage, vous pouvez changer les noms de certains objets pour les rendre moins cryptiques (df3 n‚Äôest pas tr√®s clair)."
  },
  {
    "objectID": "slides/light.html#application-1-5",
    "href": "slides/light.html#application-1-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 1",
    "text": "Application 1\n\n\n\nPartie 5 : une meilleure gestion des secrets\n\n\n\nDans cette application, on va explorer deux mani√®res possibles de g√©rer les secrets proprement.\nPremi√®re possibilit√© : de mani√®re interactive.\n\nRep√©rer le jeton d‚ÄôAPI dans le code et le retirer, en le stockant temporairement ailleurs.\nUtiliser la fonction askForPassword du package rstudioapi, qui permet de demander √† l‚Äôutilisateur d‚Äôentrer le secret √† l‚Äôaide d‚Äôun pop-up interactif.\nV√©rifier le bon fonctionnement de la solution impl√©ment√©e.\n\n‚ö†Ô∏è Cette solution n√©cessite l‚Äôex√©cution du code dans un environnement RStudio, ce qui implique un usage en self.\nDeuxi√®me possibilit√© : via les variables d‚Äôenvironnement.\n\nSupprimer la solution pr√©c√©dente (pop-up interactif) et red√©marrer le kernel R\nCr√©er un fichier .Renviron (voir cette fiche UtilitR pour plus d‚Äôinfo sur ce fichier) √† la racine du projet et y ajouter une ligne JETON_API=xxx en rempla√ßant xxx par la valeur du jeton.\nImporter la valeur du jeton dans une variable api_token √† l‚Äôaide de la fonction Sys.getenv.\nV√©rifier le bon fonctionnement de la solution impl√©ment√©e.\nV√©rifier que l‚Äôexclusion du .Renviron est bien renseign√© dans le .gitignore. Si ce n‚Äôest pas le cas, ajouter la r√®gle et v√©rifier son bon fonctionnement, puis commit/push."
  },
  {
    "objectID": "slides/light.html#checkpoint",
    "href": "slides/light.html#checkpoint",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Checkpoint",
    "text": "Checkpoint\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script script.R\nLe .gitignore"
  },
  {
    "objectID": "slides/light.html#bilan",
    "href": "slides/light.html#bilan",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bilan",
    "text": "Bilan\n\n\n\nUn code mal structur√©\n\nLimite la lisibilit√© du projet\nEst tr√®s co√ªteux √† maintenir (dette technique)\n\nLes petits gestes peuvent √©conomiser un temps pr√©cieux"
  },
  {
    "objectID": "slides/light.html#enjeux-1",
    "href": "slides/light.html#enjeux-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nFavoriser la lisibilit√© et la maintenabilit√©\nConstruire des projets reproductibles"
  },
  {
    "objectID": "slides/light.html#a-ne-pas-reproduire-chez-vous",
    "href": "slides/light.html#a-ne-pas-reproduire-chez-vous",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "‚ö†Ô∏è A ne pas reproduire chez vous",
    "text": "‚ö†Ô∏è A ne pas reproduire chez vous\n\n‚îú‚îÄ‚îÄ report.Rmd\n‚îú‚îÄ‚îÄ correlation.png\n‚îú‚îÄ‚îÄ data.csv\n‚îú‚îÄ‚îÄ data2.csv\n‚îú‚îÄ‚îÄ fig1.png\n‚îú‚îÄ‚îÄ figure 2 (copy).png\n‚îú‚îÄ‚îÄ report.pdf\n‚îú‚îÄ‚îÄ partial data.csv\n‚îú‚îÄ‚îÄ script.R\n‚îî‚îÄ‚îÄ script_final.R\nSource : eliocamp.github.io"
  },
  {
    "objectID": "slides/light.html#principes-g√©n√©raux-1",
    "href": "slides/light.html#principes-g√©n√©raux-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Principes g√©n√©raux",
    "text": "Principes g√©n√©raux\n\nUtiliser les projets RStudio\nOrganiser son projet en sous-dossiers\nDonner des noms pertinents aux fichiers\nDocumenter son projet\n(Faire de son projet un package)"
  },
  {
    "objectID": "slides/light.html#utiliser-les-projets-rstudio",
    "href": "slides/light.html#utiliser-les-projets-rstudio",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Utiliser les projets RStudio",
    "text": "1Ô∏è‚É£ Utiliser les projets RStudio\n\nObjectif : favoriser la reproductibilit√©\n\nTous les fichiers n√©cessaires au projet dans un m√™me dossier\nLe dossier contenant le projet RStudio est automatiquement utilis√© comme working directory\nUtilisation de chemins relatifs plut√¥t qu‚Äôabsolus.\n\nBonus : en utilisant Git, on s‚Äôassure de toujours travailler dans un projet RStudio !"
  },
  {
    "objectID": "slides/light.html#organiser-son-projet-en-sous-dossiers",
    "href": "slides/light.html#organiser-son-projet-en-sous-dossiers",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Organiser son projet en sous-dossiers",
    "text": "2Ô∏è‚É£ Organiser son projet en sous-dossiers\n\n\nObjectif : adopter une structure arbitraire, mais lisible et coh√©rente\n\n‚îú‚îÄ‚îÄ data\n‚îÇ   ‚îú‚îÄ‚îÄ raw\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ data.csv\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ data2.csv\n‚îÇ   ‚îî‚îÄ‚îÄ derived\n‚îÇ       ‚îî‚îÄ‚îÄ partial data.csv\n‚îú‚îÄ‚îÄ R\n|   ‚îú‚îÄ‚îÄ script.R\n‚îÇ   ‚îú‚îÄ‚îÄ script_final.R\n‚îÇ   ‚îî‚îÄ‚îÄ report.Rmd\n‚îî‚îÄ‚îÄ output\n    ‚îú‚îÄ‚îÄ fig1.png\n    ‚îú‚îÄ‚îÄ figure 2 (copy).png\n    ‚îú‚îÄ‚îÄ figure10.png\n    ‚îú‚îÄ‚îÄ correlation.png\n    ‚îî‚îÄ‚îÄ report.pdf"
  },
  {
    "objectID": "slides/light.html#donner-des-noms-pertinents-aux-fichiers",
    "href": "slides/light.html#donner-des-noms-pertinents-aux-fichiers",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Donner des noms pertinents aux fichiers",
    "text": "3Ô∏è‚É£ Donner des noms pertinents aux fichiers\n\n\nObjectif : auto-documenter son projet\n\n‚îú‚îÄ‚îÄ data\n‚îÇ   ‚îú‚îÄ‚îÄ raw\n‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ dpe_logement_202103.csv\n‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ dpe_logement_202003.csv\n‚îÇ   ‚îî‚îÄ‚îÄ derived\n‚îÇ       ‚îî‚îÄ‚îÄ dpe_logement_merged_preprocessed.csv\n‚îú‚îÄ‚îÄ R\n|   ‚îú‚îÄ‚îÄ preprocessing.R\n‚îÇ   ‚îú‚îÄ‚îÄ generate_plots.R\n‚îÇ   ‚îî‚îÄ‚îÄ report.Rmd\n‚îî‚îÄ‚îÄ output\n    ‚îú‚îÄ‚îÄ histogram_energy_diagnostic.png\n    ‚îú‚îÄ‚îÄ barplot_consumption_pcs.png\n    ‚îú‚îÄ‚îÄ correlation_matrix.png\n    ‚îî‚îÄ‚îÄ report.pdf"
  },
  {
    "objectID": "slides/light.html#documenter-son-projet",
    "href": "slides/light.html#documenter-son-projet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "4Ô∏è‚É£ Documenter son projet",
    "text": "4Ô∏è‚É£ Documenter son projet\n\nLe fichier README.md, situ√© √† la racine du projet, est √† la fois la carte d‚Äôidentit√© et la vitrine du projet\nId√©alement, il contient :\n\nUne pr√©sentation du contexte et des objectifs\nUne description de son fonctionnement\nUn guide de contribution (open-source)\n\nQuelques mod√®les de README.md complets :\n\nutilitR\nDoReMIFaSol"
  },
  {
    "objectID": "slides/light.html#faire-de-son-projet-un-package",
    "href": "slides/light.html#faire-de-son-projet-un-package",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "5Ô∏è‚É£ Faire de son projet un package",
    "text": "5Ô∏è‚É£ Faire de son projet un package\n\nUn package est la forme maximale de modularit√©\n\nContient des fonctions rang√©es dans des modules\nContient √©galement de la documentation, des tests, des (m√©ta-)donn√©es‚Ä¶\n\nAvantages\n\nId√©al pour favoriser la r√©utilisation du code\nDes outils de d√©veloppement : devtools et usethis\n\nInconv√©nients\n\nCo√ªt de maintenance √©lev√©"
  },
  {
    "objectID": "slides/light.html#ressources-suppl√©mentaires-2",
    "href": "slides/light.html#ressources-suppl√©mentaires-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\n\nLa documentation utilitR sur les projets RStudio et les packages R\nLa bible des packages R"
  },
  {
    "objectID": "slides/light.html#application-2-1",
    "href": "slides/light.html#application-2-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 2",
    "text": "Application 2\n\n\n\nPartie 1 : modularisation du projet\n\n\n\n\nD√©placer toutes les fonctions dans un fichier R/functions.R.\nDonner √† la fonction fonction_de_stat_agregee un nom plus pertinent et des noms d‚Äôarguments plus transparents.\n\nDocumenter la fonction fonction_de_stat_agregee selon le standard roxygen. Vous pouvez vous aider d‚Äôune IA assistante comme ChatGPT, Claude ou Copilot, rien n‚Äôest sensible dans ce code (d‚Äôailleurs rien de sensible ne doit √™tre dans du code !).\nUtiliser les exemples d‚Äôutilisation de fonction_de_stat_agregee dans cette documentation.\n\nDans script.R, appeler en d√©but de cha√Æne ces fonctions avec source(\"R/functions.R\", encoding = \"UTF-8\").\nTester le bon fonctionnement de script.R.\nSi votre cha√Æne √©crit des outputs ou utilise des inputs (par exemple des donn√©es), restructurer l‚Äôaborescence du projet pour le rendre plus lisible et adaptez votre code en fonction.\nRenommer (voire d√©placer) les scripts get_data.R et script.R pour rendre plus intelligible la cha√Æne de production.\nMettre √† jour le .gitignore puis commit/push."
  },
  {
    "objectID": "slides/light.html#application-2-2",
    "href": "slides/light.html#application-2-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 2",
    "text": "Application 2\n\n\n\nPartie 2 : cr√©ation d‚Äôun package (FACULTATIF)\n\n\n\n\nFermer le Rproj en cours (‚ÄúClose Project‚Äù en haut √† droite).\nInitialiser un package avec la fonction usethis::create_package() (par d√©faut dans le working directory)\nPlacer dans le dossier R du package un module stat.R et y copier la fonction de statistique agr√©g√©e\nRemplir le fichier DESCRIPTION. En particulier, sp√©cifier les d√©pendances n√©cessaires (Imports) et facultatives (Suggests)\nConstruire la documentation du package avec la fonction devtools::document(). O√π est-elle stock√©e et sous quel format ?\nCharger le package avec la fonction devtools::load_all() et v√©rifier que la fonction marche correctement\nV√©rifier que la documentation de notre fonction est accessible avec ?ma_fonction\n(Facultatif) Initialiser un nouveau projet sur GitHub est y mettre le code du package. V√©rifier que le package peut √™tre install√© en local avec la fonction devtools::install_github()."
  },
  {
    "objectID": "slides/light.html#checkpoint-2",
    "href": "slides/light.html#checkpoint-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Checkpoint",
    "text": "Checkpoint\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script script.R\nLe script R/functions.R"
  },
  {
    "objectID": "slides/light.html#enjeux-2",
    "href": "slides/light.html#enjeux-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix d‚Äôun format de donn√©es r√©pond √† un arbitrage entre plusieurs crit√®res :\n\nPublic cible\nFinalit√© (traitement, analyse, diffusion)\nVolum√©trie\nInterop√©rabilit√©"
  },
  {
    "objectID": "slides/light.html#formats-traditionnels",
    "href": "slides/light.html#formats-traditionnels",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Formats traditionnels",
    "text": "Formats traditionnels\n\nFormats de donn√©es adh√©rents √† un langage (sas7bdat, RDS, fst, etc.)\n\nNon-interop√©rables -&gt; √† √©viter !\n\nLe format CSV\n\nInterop√©rable et simple d‚Äôutilisation\nPas de gestion des m√©ta-donn√©es\nPeu adapt√© aux donn√©es volumineuses"
  },
  {
    "objectID": "slides/light.html#limites-du-csv",
    "href": "slides/light.html#limites-du-csv",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Limites du CSV",
    "text": "Limites du CSV\n\nDes performances limit√©es\n\nStockage : non-compress√© -&gt; espace disque √©lev√©\nLecture : ‚Äúorient√©-ligne‚Äù -&gt; performances faibles"
  },
  {
    "objectID": "slides/light.html#le-format-parquet",
    "href": "slides/light.html#le-format-parquet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nStockage :\n\nCompression : entre 5 et 20 fois plus l√©ger qu‚Äôun CSV\n\n\n\n\n\n\n\n\n\n\nExemple: Recensement de la Population\n\n\n\nFicher d√©tail : 20 millions de lignes, 92 variables\n\nCSV: &gt; 4Go\nParquet: &lt; 500Mo"
  },
  {
    "objectID": "slides/light.html#le-format-parquet-1",
    "href": "slides/light.html#le-format-parquet-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nLecture :\n\nJusqu‚Äô√† 34x plus rapide qu‚Äôun CSV\n\n‚ÄúOrient√© colonne‚Äù\n\nOptimis√© pour les traitements analytiques\nLimite la quantit√© de donn√©es √† mettre en m√©moire"
  },
  {
    "objectID": "slides/light.html#le-format-parquet-2",
    "href": "slides/light.html#le-format-parquet-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nPartitionner les donn√©es pour optimiser la lecture\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nL‚Äôart de bien partitionner\n\n\n\nPartitionner par une/des variable(s) d‚Äôint√©r√™t\nEviter de cr√©er de nombreux petits (&lt; 128Mo) fichiers"
  },
  {
    "objectID": "slides/light.html#le-format-parquet-3",
    "href": "slides/light.html#le-format-parquet-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nGestion native des m√©ta-donn√©es\n\nD√©finition automatique d‚Äôun sch√©ma (noms, types)\nMise √† disposition plus robuste\n\nInterop√©rable\nOpen-source"
  },
  {
    "objectID": "slides/light.html#le-format-parquet-4",
    "href": "slides/light.html#le-format-parquet-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nDeux frameworks de r√©f√©rence : Arrow et DuckDB\n\nOrientation fichier (Arrow) VS orientation BDD (DuckDB)\nTr√®s bonne int√©gration avec le tidyverse\n\nTraitement en-m√©moire optimis√©\n\nOrient√©s-colonne\nLazy evaluation\n\n\n\n\n\n\n\n\n\n\nExemple d‚Äôune requ√™te lazy\n\n\nn_logements_depcom &lt;- achille |&gt; \n  filter(dep %in% c(\"01\", \"02\", \"03\")) |&gt;  # R√©cup√®re seulement les donn√©es n√©cessaires\n  select(idlogement, depcom) |&gt;  # R√©cup√®re seulement les colonnes n√©cessaires\n  group_by(depcom) |&gt;\n  summarise(n_logements = n()) |&gt;  \n  collect()  # Les calculs ne sont effectu√©s qu'√† cette √©tape !"
  },
  {
    "objectID": "slides/light.html#le-format-parquet-5",
    "href": "slides/light.html#le-format-parquet-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le format Parquet",
    "text": "Le format Parquet\n\nParquet gagne sur tous les tableaux"
  },
  {
    "objectID": "slides/light.html#application-3-1",
    "href": "slides/light.html#application-3-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n insee\n\n\n\n\n\n\nPartie 0 : pr√©paration\n\n\n\nRemplacer le contenu du script get_data.R en copiant-collant le contenu de ce fichier. Ex√©cuter ce script, il importe les fichiers n√©cessaires pour cette application.\n\n\n\n\n\n\n\n\n\n\n\nPartie 0 : pr√©paration\n\n\n\nRemplacer le contenu du script get_data_ls3.R en copiant-collant le contenu de ce fichier. Ex√©cuter ce script, il importe les fichiers n√©cessaires pour cette application."
  },
  {
    "objectID": "slides/light.html#application-3-2",
    "href": "slides/light.html#application-3-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 1 : Du CSV au Parquet\n\n\nTout au long de cette application, nous allons voir comment utiliser le format Parquet de mani√®re la plus efficiente. Afin de comparer les diff√©rents formats et m√©thodes d‚Äôutilisation, nous allons comparer le temps d‚Äôex√©cution et l‚Äôusage m√©moire d‚Äôune requ√™te standard. Commen√ßons par comparer les formats CSV et Parquet.\n\nRemplacer le contenu du script get_data.R en copiant-collant le contenu de ce fichier. Ex√©cuter ce script, il importe les fichiers n√©cessaires dans cette application\nPour effectuer les comparaisons de performance, on va utiliser la fonction bench::mark. Analyser la documentation pour comprendre ce que la fonction attend en entr√©e.\nLa requ√™te suivante permet de calculer les donn√©es pour construire une pyramide des √¢ges sur un d√©partement donn√©, √† partir du fichier CSV du recensement. Encapsuler la requ√™te dans une fonction req_csv (sans argument).\n\nres &lt;- readr::read_csv(\"data/RPindividus_24.csv\") %&gt;% \n    filter(DEPT == \"36\") %&gt;%\n    group_by(AGED, DEPT) %&gt;%\n    summarise(n_indiv = sum(IPONDI))\n\nSur le m√™me mod√®le, construire une fonction req_read_parquet bas√©e cette fois sur le fichier data/RPindividus_24.parquet charg√© avec la fonction read_parquet d‚ÄôArrow\nComparer les performances (temps d‚Äôex√©cution et allocation m√©moire) de ces deux m√©thodes gr√¢ce √† la fonction bench::mark, √† laquelle on passera les param√®tres iterations = 1 (comparaison √† partir d‚Äôune seule it√©ration) et check = FALSE (autorise les outputs des deux fonctions √† √™tre diff√©rents).\n\n\n\n\n\n‚ùìÔ∏è Quelle semble √™tre la limite de la fonction read_parquet ?"
  },
  {
    "objectID": "slides/light.html#application-3-3",
    "href": "slides/light.html#application-3-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 2 : Exploiter la lazy evaluation et les optimisations d‚ÄôArrow\n\n\nLa partie pr√©c√©dente a montr√© un gain de temps consid√©rable du passage de CSV √† Parquet. N√©anmoins, l‚Äôutilisation m√©moire √©tait encore tr√®s √©lev√©e alors qu‚Äôon utilise de fait qu‚Äôune infime partie du fichier. Dans cette partie, on va voir comment utiliser la lazy evaluation et les optimisations du plan d‚Äôex√©cution effectu√©es par Arrow pour exploiter pleinement la puissance du format Parquet.\n\nUtiliser la fonction arrow::open_dataset pour ouvrir le fichier data/RPindividus_24.parquet. Regarder la classe de l‚Äôobjet obtenu.\nAfficher les 5 premi√®res lignes de la table avec la fonction head(). Observer l‚Äôobjet obtenu (sortie en console, classe).\nAjouter une √©tape collect() √† la fin de cette cha√Æne. Comprenez-vous la diff√©rence ?\nConstruire une fonction req_open_dataset sur le mod√®le de celles de la partie pr√©c√©dente, qui importe cette fois les donn√©es avec la fonction arrow::open_dataset\nComparer les performances (temps d‚Äôex√©cution et allocation m√©moire) des trois m√©thodes (CSV, read_parquet et open_dataset) gr√¢ce √† la fonction bench::mark\n\n\n\n\n\n‚ùìÔ∏è Quelle m√©thode retenir pour lire un Parquet avec Arrow ?"
  },
  {
    "objectID": "slides/light.html#application-3-4",
    "href": "slides/light.html#application-3-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 3 : Le Parquet partitionn√©\n\n\nLa lazy evaluation et les optimisations d‚ÄôArrow apportent des gain de performance consid√©rables. Mais on peut encore faire mieux ! Lorsqu‚Äôon sait qu‚Äôon va √™tre amen√© √† filter r√©guli√®rement les donn√©es selon une variable d‚Äôint√©r√™t, on a tout int√©r√™t √† partitionner le fichier Parquet selon cette variable.\n\nParcourir la documentation de la fonction arrow::write_dataset pour comprendre comment sp√©cifier la cl√© de partitionnement d‚Äôun fichier Parquet. Plusieurs m√©thodes sont possibles !\nDans une m√™me cha√Æne, importer la table individus compl√®te du recensement data/RPindividus.parquet avec la fonction arrow::open_dataset et l‚Äôexporter en une table data/RPindividus_dept.parquet partitionn√©e par le d√©partement (DEPT)\nObserver l‚Äôarborescence de fichiers de la table export√©e\nModifier la fonction req_open_dataset de la partie pr√©c√©dente pour partir de la table compl√®te (non-partitionn√©e) data/RPindividus.parquet au lieu de l‚Äô√©chantillon\nConstruire une fonction req_open_dataset_part sur le mod√®le de req_open_dataset, qui importe cette fois les donn√©es partitionn√©es data/RPindividus_dept.parquet. Ne pas oublier de sp√©cifier le param√®tre hive_style = TRUE.\nComparer les performances (temps d‚Äôex√©cution et allocation m√©moire) des deux m√©thodes gr√¢ce √† la fonction bench::mark\n\n\n\n\n\n\n‚ùìÔ∏è Dans le cadre d‚Äôune mise √† disposition de donn√©es en Parquet aupr√®s d‚Äôutilisateurs :\n\nComment bien choisir la/les cl√©(s) de partitionnement ?\nQuelle est la limite √† garder en t√™te ?"
  },
  {
    "objectID": "slides/light.html#application-3-5",
    "href": "slides/light.html#application-3-5",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Application 3",
    "text": "Application 3\n\n\n\n\nPartie 4 : mise √† jour de la cha√Æne de production\n\n\nConvaincus par ce comparatif, nous allons maintenant mettre √† jour le format des donn√©es utilis√©es pour notre cha√Æne de production.\n\nModifier le script script.R pour importer les donn√©es d‚Äôentr√©e de votre cha√Æne √† partir de la table Parquet partitionn√©e par d√©partement\nV√©rifier que le code tourne de A √† Z et l‚Äôadapter si ce n‚Äôest pas le cas\n\n\n\n\n\n‚ùìÔ∏è Cette mise √† jour des donn√©es utilis√©es en source de la cha√Æne de production vous semble-t-elle complexe ? Pourquoi ?"
  },
  {
    "objectID": "slides/light.html#checkpoint-4",
    "href": "slides/light.html#checkpoint-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Checkpoint",
    "text": "Checkpoint\n\n\n\n\n\n\n\nCheckpoint\n\n\n\nLe script script.R"
  },
  {
    "objectID": "slides/light.html#ressources-suppl√©mentaires-3",
    "href": "slides/light.html#ressources-suppl√©mentaires-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources suppl√©mentaires",
    "text": "Ressources suppl√©mentaires\n\nLa documentation utilitR\nCours Reproductibilit√© et bonnes pratiques pour les projets de data science de l‚ÄôENSAE\nUn cours complet (en anglais) sur la reproductibilit√© avec R\nConf√©rence ‚ÄúR in production‚Äù d‚ÄôHadley Wickham (en anglais)\nLe cours (en construction) ‚ÄúR in production‚Äù d‚ÄôHadley Wickham (en anglais)"
  },
  {
    "objectID": "slides/light.html#conclusion-2",
    "href": "slides/light.html#conclusion-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Conclusion",
    "text": "Conclusion\n\nDes standards communautaires qui favorisent la reproductibilit√© et la maintenabilit√©\nDe multiples outils pour simplifier leur mise en oeuvre\nUn co√ªt d‚Äôautant plus faible que l‚Äôon se place en amont\nLe mouvement de modernisation du self est l‚Äôoccasion d‚Äôune mont√©e en comp√©tence collective"
  },
  {
    "objectID": "slides/light.html#ressources-communautaires",
    "href": "slides/light.html#ressources-communautaires",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ressources communautaires",
    "text": "Ressources communautaires\n\nCanaux de discussion\n\nA l‚ÄôInsee\n\nPour toute question sur Git : Insee-Git-Gitlab\nPour toute question stat/self : Insee - Outils Stats v2\nPour toute question sp√©cifique √† AUS/LS3 : Insee-DSI-Plateformes-Internes-Datascience\n\nPlus largement sur R\n\nSur Tchap : Langage R (Tchap)\nSur Slack : r-grrr\n\n\nDocumentation\n\nService datascience Insee\nUtilitR\n\nFormation\n\nEspace formation du SSP Cloud"
  },
  {
    "objectID": "slides/manageurs.html#introduction",
    "href": "slides/manageurs.html#introduction",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Introduction",
    "text": "Introduction\n\nVersion pour les manageurs de la formation aux bonnes pratiques avec R et Git\n\n\nRetour √† la page d‚Äôaccueil pour explorer les autres versions"
  },
  {
    "objectID": "slides/manageurs.html#la-notion-de-bonnes-pratiques",
    "href": "slides/manageurs.html#la-notion-de-bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "La notion de bonnes pratiques",
    "text": "La notion de bonnes pratiques\n\nOrigine : communaut√© des d√©veloppeurs logiciels\nConstats :\n\nle ‚Äúcode est plus souvent lu qu‚Äô√©crit‚Äù (Guido Van Rossum)\nla maintenance d‚Äôun code est tr√®s co√ªteuse\n\nCons√©quence : un ensemble de r√®gles informelles, conventionnellement accept√©es comme produisant des logiciels fiables, √©volutifs et maintenables"
  },
  {
    "objectID": "slides/manageurs.html#pourquoi-sint√©resser-aux-bonnes-pratiques",
    "href": "slides/manageurs.html#pourquoi-sint√©resser-aux-bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Pourquoi s‚Äôint√©resser aux bonnes pratiques ?",
    "text": "Pourquoi s‚Äôint√©resser aux bonnes pratiques ?\n\nL‚Äôactivit√© du statisticien / datascientist tend √† se rapprocher de celle du d√©veloppeur :\n\nprojets intenses en code\nprojets collaboratifs et de grande envergure\ncomplexification des donn√©es et donc des infrastructures\nd√©ploiement d‚Äôapplications pour valoriser les analyses"
  },
  {
    "objectID": "slides/manageurs.html#bonnes-pratiques-et-reproductibilit√©",
    "href": "slides/manageurs.html#bonnes-pratiques-et-reproductibilit√©",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques et reproductibilit√©",
    "text": "Bonnes pratiques et reproductibilit√©\n\n\n\n\n\nSource : Peng R., Reproducible Research in Computational Science, Science (2011)\n\nUne reproductibilit√© parfaite est co√ªteuse\nGit est un standard atteignable et efficient\n\n\n\n\n\n\n\n\nNote\n\n\nQuel socle de bonnes pratiques pour les projets statistiques en  ?"
  },
  {
    "objectID": "slides/manageurs.html#horizon-de-cette-formation",
    "href": "slides/manageurs.html#horizon-de-cette-formation",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Horizon de cette formation",
    "text": "Horizon de cette formation\nUn point de d√©part commun"
  },
  {
    "objectID": "slides/manageurs.html#horizon-de-cette-formation-1",
    "href": "slides/manageurs.html#horizon-de-cette-formation-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Horizon de cette formation",
    "text": "Horizon de cette formation\nUn point de d√©part commun \nUne structuration de projet plus viable"
  },
  {
    "objectID": "slides/manageurs.html#vers-un-socle-de-bonnes-pratiques",
    "href": "slides/manageurs.html#vers-un-socle-de-bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Vers un socle de bonnes pratiques ?",
    "text": "Vers un socle de bonnes pratiques ?\n\n1Ô∏è‚É£ Qualit√© du code et structure des projets\n2Ô∏è‚É£ Les formats de donn√©es de diffusion\n3Ô∏è‚É£ Le contr√¥le de version\n4Ô∏è‚É£ Normes de s√©curit√©\n5Ô∏è‚É£ Ouverture"
  },
  {
    "objectID": "slides/manageurs.html#enjeux",
    "href": "slides/manageurs.html#enjeux",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nD‚Äôune vision utilitariste du code √† une vision du code comme outil de communication\nFavoriser la lisibilit√© et la maintenabilit√©\nFaciliter la r√©utilisation\nAssurer la transparence m√©thodologique"
  },
  {
    "objectID": "slides/manageurs.html#principes-g√©n√©raux",
    "href": "slides/manageurs.html#principes-g√©n√©raux",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Principes g√©n√©raux",
    "text": "Principes g√©n√©raux\n\nAdopter les standards communautaires\nUtiliser des fonctions\nDocumenter son code\nIndiquer les packages utilis√©s afin d‚Äô√©viter les conflits"
  },
  {
    "objectID": "slides/manageurs.html#adopter-les-standards-communautaires",
    "href": "slides/manageurs.html#adopter-les-standards-communautaires",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Adopter les standards communautaires",
    "text": "1Ô∏è‚É£ Adopter les standards communautaires\nDeux outils pratiques aident √† respecter les standards :\n\nlinter : programme qui v√©rifie que le code est formellement conforme √† un certain guidestyle\n\nsignale probl√®mes formels, sans corriger\n\nformatter : programme qui reformate un code pour le rendre conforme √† un certain guidestyle\n\nmodifie directement le code\n\n\n\n\n\n\n\n\nNote\n\n\nIl existe un guide de r√©f√©rence pour bien coder en R : le Tidyverse style guide."
  },
  {
    "objectID": "slides/manageurs.html#favoriser-la-modularit√©-des-projets",
    "href": "slides/manageurs.html#favoriser-la-modularit√©-des-projets",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Favoriser la modularit√© des projets",
    "text": "2Ô∏è‚É£ Favoriser la modularit√© des projets\n\nFavoriser l‚Äôutilisation de fonctions\n\nLimite les risques d‚Äôerreur li√©s aux copier/coller\nRend le code plus lisible et plus compact\nUnicit√© de la source de v√©rit√©\n\nLes packages\n\nId√©al pour favoriser la r√©utilisation du code\nCo√ªt de maintenance √©lev√©"
  },
  {
    "objectID": "slides/manageurs.html#documenter-son-code",
    "href": "slides/manageurs.html#documenter-son-code",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "3Ô∏è‚É£ Documenter son code",
    "text": "3Ô∏è‚É£ Documenter son code\n\nGrands principes :\n\nDocumenter le pourquoi plut√¥t que le comment\nPrivil√©gier l‚Äôauto-documentation via des nommages pertinents\n\nDocumenter le projet (contexte, objectifs, fonctionnement) dans un fichier README\n\nQuelques mod√®les : utilitR, DoReMIFaSol"
  },
  {
    "objectID": "slides/manageurs.html#enjeux-1",
    "href": "slides/manageurs.html#enjeux-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Enjeux",
    "text": "Enjeux\n\nLe choix d‚Äôun format de donn√©es r√©pond √† un arbitrage entre plusieurs crit√®res :\n\nFinalit√© (traitement, analyse, diffusion)\nPublic cible\nVolum√©trie"
  },
  {
    "objectID": "slides/manageurs.html#recommandations",
    "href": "slides/manageurs.html#recommandations",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Recommandations",
    "text": "Recommandations\n\nEviter imp√©rativement les formats de donn√©es adh√©rents √† un langage (RDS, RData, fst, sas7bdat, etc.).\nDeux formats √† privil√©gier :\n\nCSV : pour la plupart des usages courants\n\nAvantage : non-compress√© donc facilement lisible\nInconv√©nients : pas de gestion des m√©ta-donn√©es, peu adapt√© aux donn√©es volumineuses\n\nParquet : pour le traitement de donn√©es volumineuses\n\nCompress√© et tr√®s performant en lecture/√©criture\nGestion native des m√©ta-donn√©es"
  },
  {
    "objectID": "slides/manageurs.html#archiver-son-code-proprement",
    "href": "slides/manageurs.html#archiver-son-code-proprement",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\npour en finir avec √ßa :"
  },
  {
    "objectID": "slides/manageurs.html#archiver-son-code-proprement-1",
    "href": "slides/manageurs.html#archiver-son-code-proprement-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nou √ßa :"
  },
  {
    "objectID": "slides/manageurs.html#archiver-son-code-proprement-2",
    "href": "slides/manageurs.html#archiver-son-code-proprement-2",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nou encore √ßa :\nprior &lt;- read_csv(prior_path)\nprior &lt;- prior %&gt;%\n    select(id, proba_inter, proba_build, proba_rfl) %&gt;%\n    separate(id, into = c('nidt', 'grid_id'), sep = \":\") %&gt;%\n    group_by(nidt) %&gt;%\n    mutate(\n        proba_build = proba_build/sum(proba_build),\n        proba_rfl = proba_rfl/sum(proba_rfl),\n        ) %&gt;%\n    unite(col = \"id\", nidt, grid_id, sep = \":\")\n\n# Test\n# prior_test &lt;- prior %&gt;%\n#    mutate(\n#        proba_inter = round(proba_inter, 4)\n#        proba_build = round(proba_build, 4)\n#        proba_rfl = round(proba_rfl, 4)\n#    )\n\nwrite_csv(prior_round, \"~/prior.csv\")"
  },
  {
    "objectID": "slides/manageurs.html#archiver-son-code-proprement-3",
    "href": "slides/manageurs.html#archiver-son-code-proprement-3",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "1Ô∏è‚É£ Archiver son code proprement",
    "text": "1Ô∏è‚É£ Archiver son code proprement\nPour arriver √† √ßa :\n\n\n\n\n\nSource : ThinkR"
  },
  {
    "objectID": "slides/manageurs.html#voyager-dans-le-temps-de-votre-projet",
    "href": "slides/manageurs.html#voyager-dans-le-temps-de-votre-projet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "2Ô∏è‚É£ Voyager dans le temps (de votre projet)",
    "text": "2Ô∏è‚É£ Voyager dans le temps (de votre projet)"
  },
  {
    "objectID": "slides/manageurs.html#concepts",
    "href": "slides/manageurs.html#concepts",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nGit, GitHub, GitLab‚Ä¶ quelles diff√©rences ?\n\nGit est un logiciel ;\nUtilisation en ligne de commandes\nDiff√©rentes interfaces graphiques (RStudio, VS Code‚Ä¶)"
  },
  {
    "objectID": "slides/manageurs.html#concepts-1",
    "href": "slides/manageurs.html#concepts-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Concepts",
    "text": "Concepts\nGit, GitHub, GitLab‚Ä¶ quelles diff√©rences ?\n\nGitHub et GitLab sont des forges logicielles\nForge: espace d‚Äôarchivage de code\nDes fonctionalit√©s suppl√©mentaires : r√©seau social du code\n\n\n\n\n\n\n\nAstuce\n\n\n\nGitHub : utilisation pour les projets open-source\nGitLab : utilisation pour les projets internes"
  },
  {
    "objectID": "slides/manageurs.html#bonnes-pratiques",
    "href": "slides/manageurs.html#bonnes-pratiques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nQue versionne-t-on ?\n\nEssentiellement du code source\nPas d‚Äôoutputs (fichiers .html, .pdf, mod√®les‚Ä¶)\nPas de donn√©es, d‚Äôinformations locales ou sensibles\n\n\n\n\n\n\n\n\nNote\n\n\nPour d√©finir des r√®gles qui √©vitent de committer tel ou tel fichier, on utilise un fichier nomm√© .gitignore.\nSi on m√©lange du code et des √©l√©ments annexes (output, donn√©es‚Ä¶) dans un m√™me dossier, il faut consacrer du temps √† ce fichier.\nDes mod√®les de .gitignore existent sur internet, par exemple celui-ci pour les projets .\nN‚Äôh√©sitez pas √† y ajouter des r√®gles conservatrices (par exemple *.csv), comme cela est expliqu√© dans la documentation utilitR."
  },
  {
    "objectID": "slides/manageurs.html#bonnes-pratiques-1",
    "href": "slides/manageurs.html#bonnes-pratiques-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Bonnes pratiques",
    "text": "Bonnes pratiques\nFormat des commits\n\n\n\n\n\n\n\nFr√©quence\n\nAussi souvent que possible\nLe lot de modifications doit ‚Äúavoir du sens‚Äù\n\nMessages\n\nCourts et informatifs (comme un titre de mail)\nD√©crire le pourquoi plut√¥t que le comment dans le texte"
  },
  {
    "objectID": "slides/manageurs.html#ouverture-vers-la-partie-4",
    "href": "slides/manageurs.html#ouverture-vers-la-partie-4",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Ouverture vers la partie 4",
    "text": "Ouverture vers la partie 4\nNous nous sommes concentr√©s sur les briques:\n\n\n\n‚ÄúCode R‚Äù\n‚ÄúDonn√©es‚Äù\n\n\n\n\n\nMais besoin d‚Äôaller plus loin:\n\n‚ÄúCode R‚Äù : besoin d‚Äôun environnement standardis√© (renv)\n‚ÄúDonn√©es‚Äù: enjeu de localisation (r√©seau, cloud, etc)\n‚ÄúConfiguration‚Äù: enjeu de la s√©curit√©"
  },
  {
    "objectID": "slides/manageurs.html#le-cas-dusage-classique-√†-linsee",
    "href": "slides/manageurs.html#le-cas-dusage-classique-√†-linsee",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Le cas d‚Äôusage classique √† l‚ÄôInsee",
    "text": "Le cas d‚Äôusage classique √† l‚ÄôInsee\nIl faut distinguer deux types de processus de production :\n\ncelui qui est enti√®rement automatis√©, et o√π l‚Äôintervention humaine est limit√©e ;\ncelui qui n√©cessite du travail humain post√©rieur de la part du statisticien, et donc fait l‚Äôobjet de t√¢tonnements\n\ncalcul du taux de pauvret√© avec ERFS et SRCV ;\nmicro-simulation avec le mod√®le INES ;\ndes processus de suivi conjoncturels‚Ä¶"
  },
  {
    "objectID": "slides/manageurs.html#pourquoi-git-r√©pond-il-bien-aux-enjeux-de-la-production",
    "href": "slides/manageurs.html#pourquoi-git-r√©pond-il-bien-aux-enjeux-de-la-production",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Pourquoi Git r√©pond-il bien aux enjeux de la production ?",
    "text": "Pourquoi Git r√©pond-il bien aux enjeux de la production ?\n\nExemple avec calcul du taux de pauvret√© dans SRCV\n\n\nLes t√¢tonnements supposent des allers et retours sur diff√©rentes hypoth√®ses :\n\nprise en compte √©volutive des ph√©nom√®nes affectant l‚Äôindicateur (d√©fiscalisation de revenus, nouvelles prestations sociales, etc.) ;\nproduction de diff√©rentes variantes que l‚Äôon veut pouvoir comparer les unes aux autres ;\ncomprendre ce qui a √©t√© fait pour les pr√©c√©dentes productions, √©ventuellement qui a fait quoi."
  },
  {
    "objectID": "slides/manageurs.html#quels-concepts",
    "href": "slides/manageurs.html#quels-concepts",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Quels concepts ?",
    "text": "Quels concepts ?\n\n\nles variantes peuvent se d√©cliner sous la notion de branches ;\nen tra√ßant l‚Äôensemble des modifications du code, Git facilite la compl√®te reproductibilit√© des t√¢tonnements ;\nau travers de l‚Äôhistorique, il permet de retracer l‚Äôensemble du cheminement ;\nle git blame permet de voir qui a fait quoi ;\nmais cela n√©cessite une discipline sur l‚Äôusage de Git.\n\n‚áí deux notions essentielles : reproductibilit√© et tra√ßabilit√©"
  },
  {
    "objectID": "slides/manageurs.html#gestion-du-cycle-de-vie-dun-projet",
    "href": "slides/manageurs.html#gestion-du-cycle-de-vie-dun-projet",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Gestion du cycle de vie d‚Äôun projet",
    "text": "Gestion du cycle de vie d‚Äôun projet\n\nChangement de paradigme : le code self doit √™tre maintenu\n\nChangement de version de R et des packages ;\nQuelles solutions connaissez-vous ?\n\nrenv et la notion de lockfile\nanticiper les mont√©es de version des logiciels :\n\non peut envisager un protocole pour cela"
  },
  {
    "objectID": "slides/manageurs.html#gestion-du-cycle-de-vie-dun-projet-renv",
    "href": "slides/manageurs.html#gestion-du-cycle-de-vie-dun-projet-renv",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Gestion du cycle de vie d‚Äôun projet: renv",
    "text": "Gestion du cycle de vie d‚Äôun projet: renv\nExemple de renv.lock\n\n\nObserver la composition de ce fichier (100 premi√®res lignes)\n\n\n\nrenv.lock\n\n{\n  \"R\": {\n    \"Version\": \"4.3.3\",\n    \"Repositories\": [\n      {\n        \"Name\": \"CRAN\",\n        \"URL\": \"https://packagemanager.posit.co/cran/latest\"\n      }\n    ]\n  },\n  \"Packages\": {\n    \"BH\": {\n      \"Package\": \"BH\",\n      \"Version\": \"1.84.0-0\",\n      \"Source\": \"Repository\",\n      \"Repository\": \"CRAN\",\n      \"Hash\": \"a8235afbcd6316e6e91433ea47661013\"\n    },\n    \"DBI\": {\n      \"Package\": \"DBI\",\n      \"Version\": \"1.2.2\",\n      \"Source\": \"Repository\",\n      \"Repository\": \"CRAN\",\n      \"Requirements\": [\n        \"R\",\n        \"methods\"\n      ],\n      \"Hash\": \"164809cd72e1d5160b4cb3aa57f510fe\"\n    },\n    \"DT\": {\n      \"Package\": \"DT\",\n      \"Version\": \"0.33\",\n      \"Source\": \"Repository\",\n      \"Repository\": \"RSPM\",\n      \"Requirements\": [\n        \"crosstalk\",\n        \"htmltools\",\n        \"htmlwidgets\",\n        \"httpuv\",\n        \"jquerylib\",\n        \"jsonlite\",\n        \"magrittr\",\n        \"promises\"\n      ],\n      \"Hash\": \"64ff3427f559ce3f2597a4fe13255cb6\"\n    },\n    \"KernSmooth\": {\n      \"Package\": \"KernSmooth\",\n      \"Version\": \"2.23-22\",\n      \"Source\": \"Repository\",\n      \"Repository\": \"CRAN\",\n      \"Requirements\": [\n        \"R\",\n        \"stats\"\n      ],\n      \"Hash\": \"2fecebc3047322fa5930f74fae5de70f\"\n    },\n    \"MASS\": {\n      \"Package\": \"MASS\",\n      \"Version\": \"7.3-60.0.1\",\n      \"Source\": \"Repository\",\n      \"Repository\": \"CRAN\",\n      \"Requirements\": [\n        \"R\",\n        \"grDevices\",\n        \"graphics\",\n        \"methods\",\n        \"stats\",\n        \"utils\"\n      ],\n      \"Hash\": \"b765b28387acc8ec9e9c1530713cb19c\"\n    },\n    \"Matrix\": {\n      \"Package\": \"Matrix\",\n      \"Version\": \"1.6-5\",\n      \"Source\": \"Repository\",\n      \"Repository\": \"CRAN\",\n      \"Requirements\": [\n        \"R\",\n        \"grDevices\",\n        \"graphics\",\n        \"grid\",\n        \"lattice\",\n        \"methods\",\n        \"stats\",\n        \"utils\"\n      ],\n      \"Hash\": \"8c7115cd3a0e048bda2a7cd110549f7a\"\n    },\n    \"R6\": {\n      \"Package\": \"R6\",\n      \"Version\": \"2.5.1\",\n      \"Source\": \"Repository\",\n      \"Repository\": \"RSPM\",\n      \"Requirements\": [\n        \"R\"\n      ],\n      \"Hash\": \"470851b6d5d0ac559e9d01bb352b4021\"\n    },\n    \"RColorBrewer\": {\n\n\n\n\n\n\n\n\nCe que renv √©vite\n\n\nOn retrouve parfois sur internet un code similaire √† celui-ci :\n# A ne pas reproduire chez vous üò®\nif (!requireNamespace(\"dplyr\", quietly = TRUE)) {\n  install.packages(\"dplyr\")\n}"
  },
  {
    "objectID": "slides/manageurs.html#gestion-du-cycle-de-vie-dun-projet-1",
    "href": "slides/manageurs.html#gestion-du-cycle-de-vie-dun-projet-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Gestion du cycle de vie d‚Äôun projet",
    "text": "Gestion du cycle de vie d‚Äôun projet\n\nG√©rer le cycle de vie:\n\ndu code\nde son environnement d‚Äôex√©cution\ndes donn√©es mobilis√©es en entr√©e du projet et produites de mani√®re interm√©diaire.\n\nD√©finir responsabilit√©s et organisation √† la fois :\n\nsur la maintenance du code ;\nsur gitlab.insee.fr."
  },
  {
    "objectID": "slides/manageurs.html#question",
    "href": "slides/manageurs.html#question",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Question",
    "text": "Question\n\n\n\n\n\n\n\nQuestion\n\n\nQuels sont, selon vous, les principaux risques de s√©curit√© li√©s au d√©veloppement en self ?"
  },
  {
    "objectID": "slides/manageurs.html#risques",
    "href": "slides/manageurs.html#risques",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Risques üëÆ",
    "text": "Risques üëÆ\n\nMot de passe et jetons d‚Äôacc√®s √† des API\npas de mot de passe ni de jeton d‚Äôacc√®s √©crits dans le code\nRisques sur les donn√©es :\n\npas de donn√©es dans Git\npas de compte d‚Äôacc√®s commun √† des bases de donn√©es\npas de donn√©es sensibles en dehors des environnements prot√©g√©s"
  },
  {
    "objectID": "slides/manageurs.html#jetons-dacc√®s-√†-des-api",
    "href": "slides/manageurs.html#jetons-dacc√®s-√†-des-api",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Jetons d‚Äôacc√®s √† des API",
    "text": "Jetons d‚Äôacc√®s √† des API\n\nune solution √† pr√©f√©rer au mot de passe (quand disponible)\ngestion fine des droits\npossibilit√© de r√©vocation des jetons\npeuvent √™tre limit√©s dans le temps\nmais qui pr√©sentent des risques identiques aux mots de passe si les jetons ont des droits √©lev√©s"
  },
  {
    "objectID": "slides/manageurs.html#les-solutions-concr√®tes-pour-les-mots-de-passe",
    "href": "slides/manageurs.html#les-solutions-concr√®tes-pour-les-mots-de-passe",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Les solutions concr√®tes pour les mots de passe",
    "text": "Les solutions concr√®tes pour les mots de passe\nNotion de bo√Æte de dialogue qui permet d‚Äôentrer le mot de passe sans l‚Äôinscrire dans le code\nlibrary(DBI)\nlibrary(RPostgresInsee)\nlibrary(rjson)\n\n## import des √©l√©ments de connexion\n\nconnexion_details &lt;- fromJSON(file = \"X:/HAB-LOGFIDELI/Production en self/conf_servers_fideli.json\")\n\n## connexion au clone\n\nconnexion_clone &lt;- do.call(dbConnect, args = c(connexion_details$clone[2:4], \n                                               list(drv = Postgres(),\n                                                    password = rstudioapi::askForPassword(\"Mot de passe :\"))))"
  },
  {
    "objectID": "slides/manageurs.html#r√©sultat-un-prompt-qui-r√©cup√®re-le-mot-de-passe",
    "href": "slides/manageurs.html#r√©sultat-un-prompt-qui-r√©cup√®re-le-mot-de-passe",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "R√©sultat : un prompt qui r√©cup√®re le mot de passe",
    "text": "R√©sultat : un prompt qui r√©cup√®re le mot de passe"
  },
  {
    "objectID": "slides/manageurs.html#a-utiliser-avec-un-gestionnaire-de-mots-de-passe",
    "href": "slides/manageurs.html#a-utiliser-avec-un-gestionnaire-de-mots-de-passe",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "A utiliser avec un gestionnaire de mots de passe",
    "text": "A utiliser avec un gestionnaire de mots de passe\nKeePass  :\n\ndisponible dans le centre logiciel\nsimple d‚Äôutilisation\nles mots de passe sont stock√©s dans un fichier .kdbx chiffr√©\nles fichiers .kdbx sont prot√©g√©s par un mot de passe ma√Ætre\nune aide √† la g√©n√©ration de mots de passe forts"
  },
  {
    "objectID": "slides/manageurs.html#droits-dacc√®s-aux-donn√©es",
    "href": "slides/manageurs.html#droits-dacc√®s-aux-donn√©es",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Droits d‚Äôacc√®s aux donn√©es",
    "text": "Droits d‚Äôacc√®s aux donn√©es\n\nne pas utiliser de compte g√©n√©rique pour acc√©der √† des bases de donn√©es :\n\nne r√©pond pas aux exigences de tra√ßabilit√©\nne r√©pond pas aux exigences de r√©vocation des droits d‚Äôacc√®s\n\npr√©f√©rer :\n\ndes comptes individuels\nassoci√©s √† une revue annuelle des droits"
  },
  {
    "objectID": "slides/manageurs.html#stockage-des-donn√©es",
    "href": "slides/manageurs.html#stockage-des-donn√©es",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Stockage des donn√©es",
    "text": "Stockage des donn√©es\n\nDonn√©es sous forme de fichier :\n\nne pas les mettre sous Git (utiliser le fichier .gitignore)\nveiller √† ce que les donn√©es sensibles ne prolif√®rent pas.\n\nDonn√©es dans des bases de donn√©es :\n\ntoujours se poser la question de l‚Äôopportunit√© de les dupliquer sous forme de fichier\n\n\nOn pr√©f√©rera toujours avoir des donn√©es stock√©es dans un unique espace pour lequel les droits d‚Äôacc√®s sont g√©r√©s individuellement."
  },
  {
    "objectID": "slides/manageurs.html#quelques-questions-pour-commencer",
    "href": "slides/manageurs.html#quelques-questions-pour-commencer",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Quelques questions pour commencer",
    "text": "Quelques questions pour commencer\n\nPour limiter les risques de s√©curit√©, vaut-il mieux cacher son code √† ses coll√®gues ?\nQuelle est la nature juridique des codes sources r√©alis√©s √† l‚ÄôInsee ?\nR, Python et leurs packages sont gratuits, comment est-ce possible ?\nConnaissez-vous la science ouverte et ses standards ?"
  },
  {
    "objectID": "slides/manageurs.html#la-s√©curit√©-par-lobscurit√©",
    "href": "slides/manageurs.html#la-s√©curit√©-par-lobscurit√©",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "La s√©curit√© par l‚Äôobscurit√©",
    "text": "La s√©curit√© par l‚Äôobscurit√©\n\nPostulat : si on conserve ses codes sources secrets alors les failles de s√©curit√© seront plus difficiles √† d√©tecter\nCe postulat s‚Äôest av√©r√© faux :\n\ndes failles de s√©curit√© sont en permanence d√©tect√©es dans des logiciels propri√©taires\ncela revient √† cacher la fiabilit√© r√©elle des processus mis en oeuvre\nles logiciels open source sont examin√©s par de tr√®s nombreuses personnes et corrig√©s en cas de probl√®me"
  },
  {
    "objectID": "slides/manageurs.html#nature-juridique-des-codes-sources",
    "href": "slides/manageurs.html#nature-juridique-des-codes-sources",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Nature juridique des codes sources",
    "text": "Nature juridique des codes sources\n\nLes codes sources achev√©s (qui servent en production) ont le statut de document administratif\nIls peuvent faire l‚Äôobjet de demandes d‚Äôacc√®s\nEn cas d‚Äôacc√®s, la publication doit se faire en open source\nPlut√¥t que de v√©rifier en catastrophe s‚Äôil y a des probl√®mes, autant s‚Äôy pr√©parer au fur et √† mesure"
  },
  {
    "objectID": "slides/manageurs.html#diff√©rents-niveaux-douverture-possibles",
    "href": "slides/manageurs.html#diff√©rents-niveaux-douverture-possibles",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Diff√©rents niveaux d‚Äôouverture possibles",
    "text": "Diff√©rents niveaux d‚Äôouverture possibles\n\nOn peut d√©j√† ouvrir les codes en interne au sein de l‚ÄôInsee :\n\nmeilleure compr√©hension mutuelle des travaux\nassoci√© √† GitLab, un cadre id√©al pour la collaboration et la mutualisation"
  },
  {
    "objectID": "slides/manageurs.html#diff√©rents-niveaux-douverture-possibles-1",
    "href": "slides/manageurs.html#diff√©rents-niveaux-douverture-possibles-1",
    "title": "Bonnes pratiques pour les projets statistiques",
    "section": "Diff√©rents niveaux d‚Äôouverture possibles",
    "text": "Diff√©rents niveaux d‚Äôouverture possibles\n\nAu-del√†, la publication de certains projets en open source permet de valoriser le savoir-faire de l‚ÄôInsee :\n\nPackages R : disaggR, btb, RJDemetra‚Ä¶\nEurostat syst√©matise l‚Äôopen source pour les travaux europ√©ens\nune n√©cessit√© pour ne pas passer pour un passager clandestin vis-√†-vis des communaut√©s open source\nun moyen d‚Äôassurer la transparence de nos m√©thodes (cf.¬†code des bonnes pratiques et les standards de la science ouverte)\n\n\nL‚Äôensemble des bonnes pratiques qui ont √©t√© pr√©sent√©es sont issues de l‚Äôopen source."
  }
]